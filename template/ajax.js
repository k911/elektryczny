!function(t){"use strict";phpbb.addAjaxCallback("mark_forums_read",function(a){var e=a.NO_UNREAD_POSTS,o=a.UNREAD_POSTS,i={forum_unread:"forum_read",forum_unread_subforum:"forum_read_subforum",forum_unread_locked:"forum_read_locked"};t("li.row").find('dl[class*="forum_unread"]').each(function(){var a=t(this);t.each(i,function(t,e){a.hasClass(t)&&a.removeClass(t).addClass(e)}),a.children('dt[title="'+o+'"]').attr("title",e)}),t('a.subforum[class*="unread"]').removeClass("unread").addClass("read"),t("#active_topics").length&&phpbb.ajaxCallbacks.mark_topics_read.call(this,a,!1),t('[data-ajax="mark_forums_read"]').attr("href",a.U_MARK_FORUMS),phpbb.closeDarkenWrapper(3e3)}),phpbb.addAjaxCallback("mark_topics_read",function(a,e){var o,i=a.NO_UNREAD_POSTS,n=a.UNREAD_POSTS,r={global_unread:"global_read",announce_unread:"announce_read",sticky_unread:"sticky_read",topic_unread:"topic_read"},l=["","_hot","_hot_mine","_locked","_locked_mine","_mine"],s={},d=[];"undefined"==typeof e&&(e=!0),t.each(r,function(a,e){t.each(l,function(t,o){return("_hot"===o||"_hot_mine"===o)&&"topic_unread"!==a||(s[a+o]=e+o,void d.push(a+o))})}),o="."+d.join(",."),t("li.row").find(o).each(function(){var a=t(this);t.each(s,function(t,e){a.hasClass(t)&&a.removeClass(t).addClass(e)}),a.children('dt[title="'+n+'"]').attr("title",i)}),t("a").has("span.icon_topic_newest").remove(),e&&t('[data-ajax="mark_topics_read"]').attr("href",a.U_MARK_TOPICS),phpbb.closeDarkenWrapper(3e3)}),phpbb.addAjaxCallback("notification.mark_all_read",function(a){"undefined"!=typeof a.success&&(phpbb.markNotifications(t("#notification_list li.notification-unseen"),0),phpbb.closeDarkenWrapper(3e3))}),phpbb.addAjaxCallback("notification.mark_read",function(a){if("undefined"!=typeof a.success){var e=Number(t(".notifications.tab").data("badge"))-1;phpbb.markNotifications(t(this).parent("li.notification-unseen"),e)}}),phpbb.markNotifications=function(a,e){a.removeClass("notification-unseen"),a.find("a.mark_read").remove(),a.each(function(){var a=t(this).find("a");a.attr("href",a.attr("data-real-url"))}),t(".notifications.tab").attr("data-badge",e).toggleClass("non-zero mdl-badge mdl-badge--small",e>0),e||t(".mark_all_read").remove();var o=t("title"),i=o.text().replace(/(\((\d+)\))/,"");o.text((e?"("+e+")":"")+i)},phpbb.addAjaxCallback("post_delete",function(){var a,e=t(this);if(void 0===e.attr("data-refresh")){a=e[0].href.split("&p=")[1];var o=e.parents("#p"+a).css("pointer-events","none");if(o.hasClass("bg1")||o.hasClass("bg2")){var i=o.nextAll(".bg1");o.nextAll(".bg2").removeClass("bg2").addClass("bg1"),i.removeClass("bg1").addClass("bg2")}o.fadeOut(function(){t(this).remove()})}}),phpbb.addAjaxCallback("post_visibility",function(a){var e=a.visible?t(this):t(this).parents(".post");t(e).css("pointer-events","none").fadeOut(function(){t(this).remove()}),a.visible&&e.parents(".post").find(".post_deleted_msg").css("pointer-events","none").fadeOut(function(){t(this).remove()})}),phpbb.addAjaxCallback("row_delete",function(){t(this).parents("tr").remove()}),phpbb.addAjaxCallback("zebra",function(a){var e;a.success&&(e=t(".zebra"),e.first().html(a.MESSAGE_TEXT),e.not(":first").html("&nbsp;").prev().html("&nbsp;"))}),phpbb.addAjaxCallback("vote_poll",function(a){if("undefined"!=typeof a.success){var e=t(".topic_poll"),o=e.find(".panel"),i=e.find("dl:first-child .resultbar").is(":visible"),n=0,r=function(t){t="undefined"==typeof t?o.find(".inner").outerHeight():t,o.css("min-height",t)};r(),i||e.find(".poll_view_results").hide(500),a.can_vote?e.find(".resultbar, .poll_option_percent, .poll_total_votes").show(500):e.find(".polls, .poll_max_votes, .poll_vote, .poll_option_select").fadeOut(500,function(){e.find(".resultbar, .poll_option_percent, .poll_total_votes").show()}),e.find("[data-poll-option-id]").each(function(){var e=t(this),o=e.attr("data-poll-option-id");n=a.vote_counts[o]>=n?a.vote_counts[o]:n}),e.find(".poll_total_vote_cnt").html(a.total_votes),e.find("[data-poll-option-id]").each(function(){var e,o=t(this),i=o.attr("data-poll-option-id"),r="undefined"!=typeof a.user_votes[i],l=a.vote_counts[i]===n,s=a.total_votes?Math.round(a.vote_counts[i]/a.total_votes*100):0,d=0===n?0:Math.round(a.vote_counts[i]/n*100);e=o.attr("data-alt-text"),r?o.attr("title",t.trim(e)):o.attr("title",""),o.toggleClass("voted",r),o.toggleClass("most-votes",l);var c=o.find(".resultbar div"),p=a.can_vote?500:1500,f=100===s?"pollbar5":"pollbar"+(Math.floor(s/20)+1);setTimeout(function(){c.animate({width:d+"%"},500).removeClass("pollbar1 pollbar2 pollbar3 pollbar4 pollbar5").addClass(f).html(a.vote_counts[i]);var t=s?s+"%":a.NO_VOTES;o.find(".poll_option_percent").html(t)},p)}),a.can_vote||e.find(".polls").delay(400).fadeIn(500);var l=a.can_vote?300:900;e.find(".vote-submitted").delay(l).slideDown(200,function(){i&&r(),t(this).delay(5e3).fadeOut(500,function(){s(300)})}),setTimeout(function(){s(500)},1500);var s=function(t){var a=o.height(),e=o.find(".inner").outerHeight();a!==e&&o.css({minHeight:"",height:a}).animate({height:e},t,function(){o.css({minHeight:e,height:""})})}}}),t(".poll_view_results a").click(function(a){a.preventDefault();var e=t(this).parents(".topic_poll");e.find(".resultbar, .poll_option_percent, .poll_total_votes").show(500),e.find(".poll_view_results").hide(500)}),t("[data-ajax]").each(function(){var a=t(this),e=a.attr("data-ajax"),o=a.attr("data-filter");if("false"!==e){var i="true"!==e?e:null;o=void 0!==o?phpbb.getFunctionByName(o):null,phpbb.ajaxify({selector:this,refresh:void 0!==a.attr("data-refresh"),filter:o,callback:i})}}),t("#qr_full_editor").click(function(){t("#qr_postform").attr("action",function(t,a){return a+"#preview"})}),t(".display_post").click(function(a){a.preventDefault();var e=t(this).attr("data-post-id");t("#post_content"+e).show(),t("#profile"+e).show(),t("#post_hidden"+e).hide()}),t("#member_search").click(function(){var a=t("#memberlist_search");return a.slideToggle("fast"),phpbb.ajaxCallbacks.alt_text.call(this),a.is(":visible")&&t("#username").focus(),!1}),t(function(){var a=t("textarea:not(#message-box textarea, .no-auto-resize)");phpbb.resizeTextArea(a,{minHeight:75,maxHeight:250}),phpbb.resizeTextArea(t("textarea","#message-box"))})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXguanMiXSwibmFtZXMiOlsiJCIsInBocGJiIiwiYWRkQWpheENhbGxiYWNrIiwicmVzIiwicmVhZFRpdGxlIiwiTk9fVU5SRUFEX1BPU1RTIiwidW5yZWFkVGl0bGUiLCJVTlJFQURfUE9TVFMiLCJpY29uc0FycmF5IiwiZm9ydW1fdW5yZWFkIiwiZm9ydW1fdW5yZWFkX3N1YmZvcnVtIiwiZm9ydW1fdW5yZWFkX2xvY2tlZCIsImZpbmQiLCJlYWNoIiwiJHRoaXMiLCJ0aGlzIiwidW5yZWFkQ2xhc3MiLCJyZWFkQ2xhc3MiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJjaGlsZHJlbiIsImF0dHIiLCJsZW5ndGgiLCJhamF4Q2FsbGJhY2tzIiwibWFya190b3BpY3NfcmVhZCIsImNhbGwiLCJVX01BUktfRk9SVU1TIiwiY2xvc2VEYXJrZW5XcmFwcGVyIiwidXBkYXRlVG9waWNMaW5rcyIsInVucmVhZENsYXNzU2VsZWN0b3JzIiwiZ2xvYmFsX3VucmVhZCIsImFubm91bmNlX3VucmVhZCIsInN0aWNreV91bnJlYWQiLCJ0b3BpY191bnJlYWQiLCJpY29uc1N0YXRlIiwiY2xhc3NNYXAiLCJjbGFzc05hbWVzIiwia2V5IiwidmFsdWUiLCJwdXNoIiwiam9pbiIsImhhcyIsInJlbW92ZSIsIlVfTUFSS19UT1BJQ1MiLCJzdWNjZXNzIiwibWFya05vdGlmaWNhdGlvbnMiLCJ1bnJlYWRDb3VudCIsIk51bWJlciIsImRhdGEiLCJwYXJlbnQiLCIkcG9wdXAiLCJsaW5rIiwidG9nZ2xlQ2xhc3MiLCIkdGl0bGUiLCJvcmlnaW5hbFRpdGxlIiwidGV4dCIsInJlcGxhY2UiLCJwb3N0SWQiLCJ1bmRlZmluZWQiLCJocmVmIiwic3BsaXQiLCJwb3N0IiwicGFyZW50cyIsImNzcyIsInBvc3RzMSIsIm5leHRBbGwiLCJmYWRlT3V0IiwidmlzaWJsZSIsInplYnJhIiwiZmlyc3QiLCJodG1sIiwiTUVTU0FHRV9URVhUIiwibm90IiwicHJldiIsInBvbGwiLCJwYW5lbCIsInJlc3VsdHNWaXNpYmxlIiwiaXMiLCJtb3N0Vm90ZXMiLCJ1cGRhdGVQYW5lbEhlaWdodCIsImhlaWdodCIsIm91dGVySGVpZ2h0IiwiaGlkZSIsImNhbl92b3RlIiwic2hvdyIsIm9wdGlvbiIsIm9wdGlvbklkIiwidm90ZV9jb3VudHMiLCJ0b3RhbF92b3RlcyIsImFsdFRleHQiLCJ2b3RlZCIsInVzZXJfdm90ZXMiLCJtb3N0Vm90ZWQiLCJwZXJjZW50IiwiTWF0aCIsInJvdW5kIiwicGVyY2VudFJlbCIsInRyaW0iLCJiYXIiLCJiYXJUaW1lTGFwc2UiLCJuZXdCYXJDbGFzcyIsImZsb29yIiwic2V0VGltZW91dCIsImFuaW1hdGUiLCJ3aWR0aCIsInBlcmNlbnRUZXh0IiwiTk9fVk9URVMiLCJkZWxheSIsImZhZGVJbiIsImNvbmZpcm1hdGlvbkRlbGF5Iiwic2xpZGVEb3duIiwicmVzaXplUGFuZWwiLCJ0aW1lIiwicGFuZWxIZWlnaHQiLCJpbm5lckhlaWdodCIsIm1pbkhlaWdodCIsImNsaWNrIiwiZSIsInByZXZlbnREZWZhdWx0IiwiJHBvbGwiLCJhamF4IiwiZmlsdGVyIiwiZm4iLCJnZXRGdW5jdGlvbkJ5TmFtZSIsImFqYXhpZnkiLCJzZWxlY3RvciIsInJlZnJlc2giLCJjYWxsYmFjayIsImkiLCJ2YWwiLCIkbWVtYmVybGlzdFNlYXJjaCIsInNsaWRlVG9nZ2xlIiwiYWx0X3RleHQiLCJmb2N1cyIsIiR0ZXh0YXJlYSIsInJlc2l6ZVRleHRBcmVhIiwibWF4SGVpZ2h0IiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FFQSxTQUFVQSxHQUVWLFlBR0FDLE9BQU1DLGdCQUFnQixtQkFBb0IsU0FBU0MsR0FDbEQsR0FBSUMsR0FBWUQsRUFBSUUsZ0JBQ2hCQyxFQUFjSCxFQUFJSSxhQUNsQkMsR0FDSEMsYUFBYyxhQUNkQyxzQkFBdUIsc0JBQ3ZCQyxvQkFBcUIsb0JBR3RCWCxHQUFFLFVBQVVZLEtBQUssNkJBQTZCQyxLQUFLLFdBQ2xELEdBQUlDLEdB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L1xyXG5cclxuKGZ1bmN0aW9uKCQpIHsgIC8vIEF2b2lkIGNvbmZsaWN0cyB3aXRoIG90aGVyIGxpYnJhcmllc1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuLy8gVGhpcyBjYWxsYmFjayB3aWxsIG1hcmsgYWxsIGZvcnVtIGljb25zIHJlYWRcclxucGhwYmIuYWRkQWpheENhbGxiYWNrKCdtYXJrX2ZvcnVtc19yZWFkJywgZnVuY3Rpb24ocmVzKSB7XHJcblx0dmFyIHJlYWRUaXRsZSA9IHJlcy5OT19VTlJFQURfUE9TVFM7XHJcblx0dmFyIHVucmVhZFRpdGxlID0gcmVzLlVOUkVBRF9QT1NUUztcclxuXHR2YXIgaWNvbnNBcnJheSA9IHtcclxuXHRcdGZvcnVtX3VucmVhZDogJ2ZvcnVtX3JlYWQnLFxyXG5cdFx0Zm9ydW1fdW5yZWFkX3N1YmZvcnVtOiAnZm9ydW1fcmVhZF9zdWJmb3J1bScsXHJcblx0XHRmb3J1bV91bnJlYWRfbG9ja2VkOiAnZm9ydW1fcmVhZF9sb2NrZWQnXHJcblx0fTtcclxuXHJcblx0JCgnbGkucm93JykuZmluZCgnZGxbY2xhc3MqPVwiZm9ydW1fdW5yZWFkXCJdJykuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdHZhciAkdGhpcyA9ICQodGhpcyk7XHJcblxyXG5cdFx0JC5lYWNoKGljb25zQXJyYXksIGZ1bmN0aW9uKHVucmVhZENsYXNzLCByZWFkQ2xhc3MpIHtcclxuXHRcdFx0aWYgKCR0aGlzLmhhc0NsYXNzKHVucmVhZENsYXNzKSkge1xyXG5cdFx0XHRcdCR0aGlzLnJlbW92ZUNsYXNzKHVucmVhZENsYXNzKS5hZGRDbGFzcyhyZWFkQ2xhc3MpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdCR0aGlzLmNoaWxkcmVuKCdkdFt0aXRsZT1cIicgKyB1bnJlYWRUaXRsZSArICdcIl0nKS5hdHRyKCd0aXRsZScsIHJlYWRUaXRsZSk7XHJcblx0fSk7XHJcblxyXG5cdC8vIE1hcmsgc3ViZm9ydW1zIHJlYWRcclxuXHQkKCdhLnN1YmZvcnVtW2NsYXNzKj1cInVucmVhZFwiXScpLnJlbW92ZUNsYXNzKCd1bnJlYWQnKS5hZGRDbGFzcygncmVhZCcpO1xyXG5cclxuXHQvLyBNYXJrIHRvcGljcyByZWFkIGlmIHdlIGFyZSB3YXRjaGluZyBhIGNhdGVnb3J5IGFuZCBzaG93aW5nIGFjdGl2ZSB0b3BpY3NcclxuXHRpZiAoJCgnI2FjdGl2ZV90b3BpY3MnKS5sZW5ndGgpIHtcclxuXHRcdHBocGJiLmFqYXhDYWxsYmFja3MubWFya190b3BpY3NfcmVhZC5jYWxsKHRoaXMsIHJlcywgZmFsc2UpO1xyXG5cdH1cclxuXHJcblx0Ly8gVXBkYXRlIG1hcmsgZm9ydW1zIHJlYWQgbGlua3NcclxuXHQkKCdbZGF0YS1hamF4PVwibWFya19mb3J1bXNfcmVhZFwiXScpLmF0dHIoJ2hyZWYnLCByZXMuVV9NQVJLX0ZPUlVNUyk7XHJcblxyXG5cdHBocGJiLmNsb3NlRGFya2VuV3JhcHBlcigzMDAwKTtcclxufSk7XHJcblxyXG4vKipcclxuKiBUaGlzIGNhbGxiYWNrIHdpbGwgbWFyayBhbGwgdG9waWMgaWNvbnMgcmVhZFxyXG4qXHJcbiogQHBhcmFtIHtib29sfSBbdXBkYXRlX3RvcGljX2xpbmtzPXRydWVdIFdoZXRoZXIgXCJNYXJrIHRvcGljcyByZWFkXCIgbGlua3NcclxuKiBcdHNob3VsZCBiZSB1cGRhdGVkLiBEZWZhdWx0cyB0byB0cnVlLlxyXG4qL1xyXG5waHBiYi5hZGRBamF4Q2FsbGJhY2soJ21hcmtfdG9waWNzX3JlYWQnLCBmdW5jdGlvbihyZXMsIHVwZGF0ZVRvcGljTGlua3MpIHtcclxuXHR2YXIgcmVhZFRpdGxlID0gcmVzLk5PX1VOUkVBRF9QT1NUUztcclxuXHR2YXIgdW5yZWFkVGl0bGUgPSByZXMuVU5SRUFEX1BPU1RTO1xyXG5cdHZhciBpY29uc0FycmF5ID0ge1xyXG5cdFx0Z2xvYmFsX3VucmVhZDogJ2dsb2JhbF9yZWFkJyxcclxuXHRcdGFubm91bmNlX3VucmVhZDogJ2Fubm91bmNlX3JlYWQnLFxyXG5cdFx0c3RpY2t5X3VucmVhZDogJ3N0aWNreV9yZWFkJyxcclxuXHRcdHRvcGljX3VucmVhZDogJ3RvcGljX3JlYWQnXHJcblx0fTtcclxuXHR2YXIgaWNvbnNTdGF0ZSA9IFsnJywgJ19ob3QnLCAnX2hvdF9taW5lJywgJ19sb2NrZWQnLCAnX2xvY2tlZF9taW5lJywgJ19taW5lJ107XHJcblx0dmFyIHVucmVhZENsYXNzU2VsZWN0b3JzO1xyXG5cdHZhciBjbGFzc01hcCA9IHt9O1xyXG5cdHZhciBjbGFzc05hbWVzID0gW107XHJcblxyXG5cdGlmICh0eXBlb2YgdXBkYXRlVG9waWNMaW5rcyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdHVwZGF0ZVRvcGljTGlua3MgPSB0cnVlO1xyXG5cdH1cclxuXHJcblx0JC5lYWNoKGljb25zQXJyYXksIGZ1bmN0aW9uKHVucmVhZENsYXNzLCByZWFkQ2xhc3MpIHtcclxuXHRcdCQuZWFjaChpY29uc1N0YXRlLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XHJcblx0XHRcdC8vIE9ubHkgdG9waWNzIGNhbiBiZSBob3RcclxuXHRcdFx0aWYgKCh2YWx1ZSA9PT0gJ19ob3QnIHx8IHZhbHVlID09PSAnX2hvdF9taW5lJykgJiYgdW5yZWFkQ2xhc3MgIT09ICd0b3BpY191bnJlYWQnKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Y2xhc3NNYXBbdW5yZWFkQ2xhc3MgKyB2YWx1ZV0gPSByZWFkQ2xhc3MgKyB2YWx1ZTtcclxuXHRcdFx0Y2xhc3NOYW1lcy5wdXNoKHVucmVhZENsYXNzICsgdmFsdWUpO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcblxyXG5cdHVucmVhZENsYXNzU2VsZWN0b3JzID0gJy4nICsgY2xhc3NOYW1lcy5qb2luKCcsLicpO1xyXG5cclxuXHQkKCdsaS5yb3cnKS5maW5kKHVucmVhZENsYXNzU2VsZWN0b3JzKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyICR0aGlzID0gJCh0aGlzKTtcclxuXHRcdCQuZWFjaChjbGFzc01hcCwgZnVuY3Rpb24odW5yZWFkQ2xhc3MsIHJlYWRDbGFzcykge1xyXG5cdFx0XHRpZiAoJHRoaXMuaGFzQ2xhc3ModW5yZWFkQ2xhc3MpKSB7XHJcblx0XHRcdFx0JHRoaXMucmVtb3ZlQ2xhc3ModW5yZWFkQ2xhc3MpLmFkZENsYXNzKHJlYWRDbGFzcyk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0JHRoaXMuY2hpbGRyZW4oJ2R0W3RpdGxlPVwiJyArIHVucmVhZFRpdGxlICsgJ1wiXScpLmF0dHIoJ3RpdGxlJywgcmVhZFRpdGxlKTtcclxuXHR9KTtcclxuXHJcblx0Ly8gUmVtb3ZlIGxpbmsgdG8gZmlyc3QgdW5yZWFkIHBvc3RcclxuXHQkKCdhJykuaGFzKCdzcGFuLmljb25fdG9waWNfbmV3ZXN0JykucmVtb3ZlKCk7XHJcblxyXG5cdC8vIFVwZGF0ZSBtYXJrIHRvcGljcyByZWFkIGxpbmtzXHJcblx0aWYgKHVwZGF0ZVRvcGljTGlua3MpIHtcclxuXHRcdCQoJ1tkYXRhLWFqYXg9XCJtYXJrX3RvcGljc19yZWFkXCJdJykuYXR0cignaHJlZicsIHJlcy5VX01BUktfVE9QSUNTKTtcclxuXHR9XHJcblxyXG5cdHBocGJiLmNsb3NlRGFya2VuV3JhcHBlcigzMDAwKTtcclxufSk7XHJcblxyXG4vLyBUaGlzIGNhbGxiYWNrIHdpbGwgbWFyayBhbGwgbm90aWZpY2F0aW9ucyByZWFkXHJcbnBocGJiLmFkZEFqYXhDYWxsYmFjaygnbm90aWZpY2F0aW9uLm1hcmtfYWxsX3JlYWQnLCBmdW5jdGlvbihyZXMpIHtcclxuXHRpZiAodHlwZW9mIHJlcy5zdWNjZXNzICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0cGhwYmIubWFya05vdGlmaWNhdGlvbnMoJCgnI25vdGlmaWNhdGlvbl9saXN0IGxpLm5vdGlmaWNhdGlvbi11bnNlZW4nKSwgMCk7XHJcblx0XHRwaHBiYi5jbG9zZURhcmtlbldyYXBwZXIoMzAwMCk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vIFRoaXMgY2FsbGJhY2sgd2lsbCBtYXJrIGEgbm90aWZpY2F0aW9uIHJlYWRcclxucGhwYmIuYWRkQWpheENhbGxiYWNrKCdub3RpZmljYXRpb24ubWFya19yZWFkJywgZnVuY3Rpb24ocmVzKSB7XHJcblx0aWYgKHR5cGVvZiByZXMuc3VjY2VzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdHZhciB1bnJlYWRDb3VudCA9IE51bWJlcigkKCcubm90aWZpY2F0aW9ucy50YWInKS5kYXRhKCdiYWRnZScpKSAtIDE7XHJcblx0XHRwaHBiYi5tYXJrTm90aWZpY2F0aW9ucygkKHRoaXMpLnBhcmVudCgnbGkubm90aWZpY2F0aW9uLXVuc2VlbicpLCB1bnJlYWRDb3VudCk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBNYXJrIG5vdGlmaWNhdGlvbiBwb3B1cCByb3dzIGFzIHJlYWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7alF1ZXJ5fSAkcG9wdXAgalF1ZXJ5IG9iamVjdChzKSB0byBtYXJrIHJlYWQuXHJcbiAqIEBwYXJhbSB7aW50fSB1bnJlYWRDb3VudCBUaGUgbmV3IHVucmVhZCBub3RpZmljYXRpb25zIGNvdW50LlxyXG4gKi9cclxucGhwYmIubWFya05vdGlmaWNhdGlvbnMgPSBmdW5jdGlvbigkcG9wdXAsIHVucmVhZENvdW50KSB7XHJcblx0Ly8gUmVtb3ZlIHRoZSB1bnJlYWQgc3RhdHVzLlxyXG5cdCRwb3B1cC5yZW1vdmVDbGFzcygnbm90aWZpY2F0aW9uLXVuc2VlbicpO1xyXG5cdCRwb3B1cC5maW5kKCdhLm1hcmtfcmVhZCcpLnJlbW92ZSgpO1xyXG5cclxuXHQvLyBVcGRhdGUgdGhlIG5vdGlmaWNhdGlvbiBsaW5rIHRvIHRoZSByZWFsIFVSTC5cclxuXHQkcG9wdXAuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdHZhciBsaW5rID0gJCh0aGlzKS5maW5kKCdhJyk7XHJcblx0XHRsaW5rLmF0dHIoJ2hyZWYnLCBsaW5rLmF0dHIoJ2RhdGEtcmVhbC11cmwnKSk7XHJcblx0fSk7XHJcblxyXG5cdC8vIFVwZGF0ZSB0aGUgdW5yZWFkIGNvdW50LlxyXG5cdCQoJy5ub3RpZmljYXRpb25zLnRhYicpLmF0dHIoJ2RhdGEtYmFkZ2UnLCB1bnJlYWRDb3VudCkudG9nZ2xlQ2xhc3MoJ25vbi16ZXJvIG1kbC1iYWRnZSBtZGwtYmFkZ2UtLXNtYWxsJywgdW5yZWFkQ291bnQgPiAwKTtcclxuXHRcclxuXHQvLyBSZW1vdmUgdGhlIE1hcmsgYWxsIHJlYWQgbGluayBpZiB0aGVyZSBhcmUgbm8gdW5yZWFkIG5vdGlmaWNhdGlvbnMuXHJcblx0aWYgKCF1bnJlYWRDb3VudCkge1xyXG5cdFx0JCgnLm1hcmtfYWxsX3JlYWQnKS5yZW1vdmUoKTtcclxuXHR9XHJcblxyXG5cdC8vIFVwZGF0ZSBwYWdlIHRpdGxlXHJcblx0dmFyICR0aXRsZSA9ICQoJ3RpdGxlJyk7XHJcblx0dmFyIG9yaWdpbmFsVGl0bGUgPSAkdGl0bGUudGV4dCgpLnJlcGxhY2UoLyhcXCgoXFxkKylcXCkpLywgJycpO1xyXG5cdCR0aXRsZS50ZXh0KCh1bnJlYWRDb3VudCA/ICcoJyArIHVucmVhZENvdW50ICsgJyknIDogJycpICsgb3JpZ2luYWxUaXRsZSk7XHJcbn07XHJcblxyXG4vLyBUaGlzIGNhbGxiYWNrIGZpbmRzIHRoZSBwb3N0IGZyb20gdGhlIGRlbGV0ZSBsaW5rLCBhbmQgcmVtb3ZlcyBpdC5cclxucGhwYmIuYWRkQWpheENhbGxiYWNrKCdwb3N0X2RlbGV0ZScsIGZ1bmN0aW9uKCkge1xyXG5cdHZhciAkdGhpcyA9ICQodGhpcyksXHJcblx0XHRwb3N0SWQ7XHJcblxyXG5cdGlmICgkdGhpcy5hdHRyKCdkYXRhLXJlZnJlc2gnKSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRwb3N0SWQgPSAkdGhpc1swXS5ocmVmLnNwbGl0KCcmcD0nKVsxXTtcclxuXHRcdHZhciBwb3N0ID0gJHRoaXMucGFyZW50cygnI3AnICsgcG9zdElkKS5jc3MoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcclxuXHRcdGlmIChwb3N0Lmhhc0NsYXNzKCdiZzEnKSB8fCBwb3N0Lmhhc0NsYXNzKCdiZzInKSkge1xyXG5cdFx0XHR2YXIgcG9zdHMxID0gcG9zdC5uZXh0QWxsKCcuYmcxJyk7XHJcblx0XHRcdHBvc3QubmV4dEFsbCgnLmJnMicpLnJlbW92ZUNsYXNzKCdiZzInKS5hZGRDbGFzcygnYmcxJyk7XHJcblx0XHRcdHBvc3RzMS5yZW1vdmVDbGFzcygnYmcxJykuYWRkQ2xhc3MoJ2JnMicpO1xyXG5cdFx0fVxyXG5cdFx0cG9zdC5mYWRlT3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkKHRoaXMpLnJlbW92ZSgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vIFRoaXMgY2FsbGJhY2sgcmVtb3ZlcyB0aGUgYXBwcm92ZSAvIGRpc2FwcHJvdmUgZGl2IG9yIGxpbmsuXHJcbnBocGJiLmFkZEFqYXhDYWxsYmFjaygncG9zdF92aXNpYmlsaXR5JywgZnVuY3Rpb24ocmVzKSB7XHJcblx0dmFyIHJlbW92ZSA9IChyZXMudmlzaWJsZSkgPyAkKHRoaXMpIDogJCh0aGlzKS5wYXJlbnRzKCcucG9zdCcpO1xyXG5cdCQocmVtb3ZlKS5jc3MoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKS5mYWRlT3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0JCh0aGlzKS5yZW1vdmUoKTtcclxuXHR9KTtcclxuXHJcblx0aWYgKHJlcy52aXNpYmxlKSB7XHJcblx0XHQvLyBSZW1vdmUgdGhlIFwiRGVsZXRlZCBieVwiIG1lc3NhZ2UgZnJvbSB0aGUgcG9zdCBvbiByZXN0b3JpbmcuXHJcblx0XHRyZW1vdmUucGFyZW50cygnLnBvc3QnKS5maW5kKCcucG9zdF9kZWxldGVkX21zZycpLmNzcygncG9pbnRlci1ldmVudHMnLCAnbm9uZScpLmZhZGVPdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQodGhpcykucmVtb3ZlKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gVGhpcyByZW1vdmVzIHRoZSBwYXJlbnQgcm93IG9mIHRoZSBsaW5rIG9yIGZvcm0gdGhhdCBmaXJlZCB0aGUgY2FsbGJhY2suXHJcbnBocGJiLmFkZEFqYXhDYWxsYmFjaygncm93X2RlbGV0ZScsIGZ1bmN0aW9uKCkge1xyXG5cdCQodGhpcykucGFyZW50cygndHInKS5yZW1vdmUoKTtcclxufSk7XHJcblxyXG4vLyBUaGlzIGhhbmRsZXMgZnJpZW5kIC8gZm9lIGFkZGl0aW9ucyByZW1vdmFscy5cclxucGhwYmIuYWRkQWpheENhbGxiYWNrKCd6ZWJyYScsIGZ1bmN0aW9uKHJlcykge1xyXG5cdHZhciB6ZWJyYTtcclxuXHJcblx0aWYgKHJlcy5zdWNjZXNzKSB7XHJcblx0XHR6ZWJyYSA9ICQoJy56ZWJyYScpO1xyXG5cdFx0emVicmEuZmlyc3QoKS5odG1sKHJlcy5NRVNTQUdFX1RFWFQpO1xyXG5cdFx0emVicmEubm90KCc6Zmlyc3QnKS5odG1sKCcmbmJzcDsnKS5wcmV2KCkuaHRtbCgnJm5ic3A7Jyk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBUaGlzIGNhbGxiYWNrIHVwZGF0ZXMgdGhlIHBvbGwgcmVzdWx0cyBhZnRlciB2b3RpbmcuXHJcbiAqL1xyXG5waHBiYi5hZGRBamF4Q2FsbGJhY2soJ3ZvdGVfcG9sbCcsIGZ1bmN0aW9uKHJlcykge1xyXG5cdGlmICh0eXBlb2YgcmVzLnN1Y2Nlc3MgIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHR2YXIgcG9sbCA9ICQoJy50b3BpY19wb2xsJyk7XHJcblx0XHR2YXIgcGFuZWwgPSBwb2xsLmZpbmQoJy5wYW5lbCcpO1xyXG5cdFx0dmFyIHJlc3VsdHNWaXNpYmxlID0gcG9sbC5maW5kKCdkbDpmaXJzdC1jaGlsZCAucmVzdWx0YmFyJykuaXMoJzp2aXNpYmxlJyk7XHJcblx0XHR2YXIgbW9zdFZvdGVzID0gMDtcclxuXHJcblx0XHQvLyBTZXQgbWluLWhlaWdodCB0byBwcmV2ZW50IHRoZSBwYWdlIGZyb20ganVtcGluZyB3aGVuIHRoZSBjb250ZW50IGNoYW5nZXNcclxuXHRcdHZhciB1cGRhdGVQYW5lbEhlaWdodCA9IGZ1bmN0aW9uIChoZWlnaHQpIHtcclxuXHRcdFx0aGVpZ2h0ID0gKHR5cGVvZiBoZWlnaHQgPT09ICd1bmRlZmluZWQnKSA/IHBhbmVsLmZpbmQoJy5pbm5lcicpLm91dGVySGVpZ2h0KCkgOiBoZWlnaHQ7XHJcblx0XHRcdHBhbmVsLmNzcygnbWluLWhlaWdodCcsIGhlaWdodCk7XHJcblx0XHR9O1xyXG5cdFx0dXBkYXRlUGFuZWxIZWlnaHQoKTtcclxuXHJcblx0XHQvLyBSZW1vdmUgdGhlIFZpZXcgcmVzdWx0cyBsaW5rXHJcblx0XHRpZiAoIXJlc3VsdHNWaXNpYmxlKSB7XHJcblx0XHRcdHBvbGwuZmluZCgnLnBvbGxfdmlld19yZXN1bHRzJykuaGlkZSg1MDApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghcmVzLmNhbl92b3RlKSB7XHJcblx0XHRcdHBvbGwuZmluZCgnLnBvbGxzLCAucG9sbF9tYXhfdm90ZXMsIC5wb2xsX3ZvdGUsIC5wb2xsX29wdGlvbl9zZWxlY3QnKS5mYWRlT3V0KDUwMCwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHBvbGwuZmluZCgnLnJlc3VsdGJhciwgLnBvbGxfb3B0aW9uX3BlcmNlbnQsIC5wb2xsX3RvdGFsX3ZvdGVzJykuc2hvdygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIElmIHRoZSB1c2VyIGNhbiBzdGlsbCB2b3RlLCBzaW1wbHkgc2xpZGUgZG93biB0aGUgcmVzdWx0c1xyXG5cdFx0XHRwb2xsLmZpbmQoJy5yZXN1bHRiYXIsIC5wb2xsX29wdGlvbl9wZXJjZW50LCAucG9sbF90b3RhbF92b3RlcycpLnNob3coNTAwKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBHZXQgdGhlIHZvdGVzIGNvdW50IG9mIHRoZSBoaWdoZXN0IHBvbGwgb3B0aW9uXHJcblx0XHRwb2xsLmZpbmQoJ1tkYXRhLXBvbGwtb3B0aW9uLWlkXScpLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBvcHRpb24gPSAkKHRoaXMpO1xyXG5cdFx0XHR2YXIgb3B0aW9uSWQgPSBvcHRpb24uYXR0cignZGF0YS1wb2xsLW9wdGlvbi1pZCcpO1xyXG5cdFx0XHRtb3N0Vm90ZXMgPSAocmVzLnZvdGVfY291bnRzW29wdGlvbklkXSA+PSBtb3N0Vm90ZXMpID8gcmVzLnZvdGVfY291bnRzW29wdGlvbklkXSA6IG1vc3RWb3RlcztcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFVwZGF0ZSB0aGUgdG90YWwgdm90ZXMgY291bnRcclxuXHRcdHBvbGwuZmluZCgnLnBvbGxfdG90YWxfdm90ZV9jbnQnKS5odG1sKHJlcy50b3RhbF92b3Rlcyk7XHJcblxyXG5cdFx0Ly8gVXBkYXRlIGVhY2ggb3B0aW9uXHJcblx0XHRwb2xsLmZpbmQoJ1tkYXRhLXBvbGwtb3B0aW9uLWlkXScpLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkdGhpcyA9ICQodGhpcyk7XHJcblx0XHRcdHZhciBvcHRpb25JZCA9ICR0aGlzLmF0dHIoJ2RhdGEtcG9sbC1vcHRpb24taWQnKTtcclxuXHRcdFx0dmFyIHZvdGVkID0gKHR5cGVvZiByZXMudXNlcl92b3Rlc1tvcHRpb25JZF0gIT09ICd1bmRlZmluZWQnKTtcclxuXHRcdFx0dmFyIG1vc3RWb3RlZCA9IChyZXMudm90ZV9jb3VudHNbb3B0aW9uSWRdID09PSBtb3N0Vm90ZXMpO1xyXG5cdFx0XHR2YXIgcGVyY2VudCA9ICghcmVzLnRvdGFsX3ZvdGVzKSA/IDAgOiBNYXRoLnJvdW5kKChyZXMudm90ZV9jb3VudHNbb3B0aW9uSWRdIC8gcmVzLnRvdGFsX3ZvdGVzKSAqIDEwMCk7XHJcblx0XHRcdHZhciBwZXJjZW50UmVsID0gKG1vc3RWb3RlcyA9PT0gMCkgPyAwIDogTWF0aC5yb3VuZCgocmVzLnZvdGVfY291bnRzW29wdGlvbklkXSAvIG1vc3RWb3RlcykgKiAxMDApO1xyXG5cdFx0XHR2YXIgYWx0VGV4dDtcclxuXHJcblx0XHRcdGFsdFRleHQgPSAkdGhpcy5hdHRyKCdkYXRhLWFsdC10ZXh0Jyk7XHJcblx0XHRcdGlmICh2b3RlZCkge1xyXG5cdFx0XHRcdCR0aGlzLmF0dHIoJ3RpdGxlJywgJC50cmltKGFsdFRleHQpKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkdGhpcy5hdHRyKCd0aXRsZScsICcnKTtcclxuXHRcdFx0fTtcclxuXHRcdFx0JHRoaXMudG9nZ2xlQ2xhc3MoJ3ZvdGVkJywgdm90ZWQpO1xyXG5cdFx0XHQkdGhpcy50b2dnbGVDbGFzcygnbW9zdC12b3RlcycsIG1vc3RWb3RlZCk7XHJcblxyXG5cdFx0XHQvLyBVcGRhdGUgdGhlIGJhcnNcclxuXHRcdFx0dmFyIGJhciA9ICR0aGlzLmZpbmQoJy5yZXN1bHRiYXIgZGl2Jyk7XHJcblx0XHRcdHZhciBiYXJUaW1lTGFwc2UgPSAocmVzLmNhbl92b3RlKSA/IDUwMCA6IDE1MDA7XHJcblx0XHRcdHZhciBuZXdCYXJDbGFzcyA9IChwZXJjZW50ID09PSAxMDApID8gJ3BvbGxiYXI1JyA6ICdwb2xsYmFyJyArIChNYXRoLmZsb29yKHBlcmNlbnQgLyAyMCkgKyAxKTtcclxuXHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGJhci5hbmltYXRlKHsgd2lkdGg6IHBlcmNlbnRSZWwgKyAnJScgfSwgNTAwKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCdwb2xsYmFyMSBwb2xsYmFyMiBwb2xsYmFyMyBwb2xsYmFyNCBwb2xsYmFyNScpXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MobmV3QmFyQ2xhc3MpXHJcblx0XHRcdFx0XHQuaHRtbChyZXMudm90ZV9jb3VudHNbb3B0aW9uSWRdKTtcclxuXHJcblx0XHRcdFx0dmFyIHBlcmNlbnRUZXh0ID0gcGVyY2VudCA/IHBlcmNlbnQgKyAnJScgOiByZXMuTk9fVk9URVM7XHJcblx0XHRcdFx0JHRoaXMuZmluZCgnLnBvbGxfb3B0aW9uX3BlcmNlbnQnKS5odG1sKHBlcmNlbnRUZXh0KTtcclxuXHRcdFx0fSwgYmFyVGltZUxhcHNlKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICghcmVzLmNhbl92b3RlKSB7XHJcblx0XHRcdHBvbGwuZmluZCgnLnBvbGxzJykuZGVsYXkoNDAwKS5mYWRlSW4oNTAwKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEaXNwbGF5IFwiWW91ciB2b3RlIGhhcyBiZWVuIGNhc3QuXCIgbWVzc2FnZS4gRGlzYXBwZWFycyBhZnRlciA1IHNlY29uZHMuXHJcblx0XHR2YXIgY29uZmlybWF0aW9uRGVsYXkgPSAocmVzLmNhbl92b3RlKSA/IDMwMCA6IDkwMDtcclxuXHRcdHBvbGwuZmluZCgnLnZvdGUtc3VibWl0dGVkJykuZGVsYXkoY29uZmlybWF0aW9uRGVsYXkpLnNsaWRlRG93bigyMDAsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAocmVzdWx0c1Zpc2libGUpIHtcclxuXHRcdFx0XHR1cGRhdGVQYW5lbEhlaWdodCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQkKHRoaXMpLmRlbGF5KDUwMDApLmZhZGVPdXQoNTAwLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXNpemVQYW5lbCgzMDApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFJlbW92ZSB0aGUgZ2FwIHJlc3VsdGluZyBmcm9tIHJlbW92aW5nIG9wdGlvbnNcclxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJlc2l6ZVBhbmVsKDUwMCk7XHJcblx0XHR9LCAxNTAwKTtcclxuXHJcblx0XHR2YXIgcmVzaXplUGFuZWwgPSBmdW5jdGlvbiAodGltZSkge1xyXG5cdFx0XHR2YXIgcGFuZWxIZWlnaHQgPSBwYW5lbC5oZWlnaHQoKTtcclxuXHRcdFx0dmFyIGlubmVySGVpZ2h0ID0gcGFuZWwuZmluZCgnLmlubmVyJykub3V0ZXJIZWlnaHQoKTtcclxuXHJcblx0XHRcdGlmIChwYW5lbEhlaWdodCAhPT0gaW5uZXJIZWlnaHQpIHtcclxuXHRcdFx0XHRwYW5lbC5jc3MoeyBtaW5IZWlnaHQ6ICcnLCBoZWlnaHQ6IHBhbmVsSGVpZ2h0IH0pXHJcblx0XHRcdFx0XHQuYW5pbWF0ZSh7IGhlaWdodDogaW5uZXJIZWlnaHQgfSwgdGltZSwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0XHRwYW5lbC5jc3MoeyBtaW5IZWlnaHQ6IGlubmVySGVpZ2h0LCBoZWlnaHQ6ICcnIH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBTaG93IHBvbGwgcmVzdWx0cyB3aGVuIGNsaWNraW5nIFZpZXcgcmVzdWx0cyBsaW5rLlxyXG4gKi9cclxuJCgnLnBvbGxfdmlld19yZXN1bHRzIGEnKS5jbGljayhmdW5jdGlvbihlKSB7XHJcblx0Ly8gRG8gbm90IGZvbGxvdyB0aGUgbGlua1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0dmFyICRwb2xsID0gJCh0aGlzKS5wYXJlbnRzKCcudG9waWNfcG9sbCcpO1xyXG5cclxuXHQkcG9sbC5maW5kKCcucmVzdWx0YmFyLCAucG9sbF9vcHRpb25fcGVyY2VudCwgLnBvbGxfdG90YWxfdm90ZXMnKS5zaG93KDUwMCk7XHJcblx0JHBvbGwuZmluZCgnLnBvbGxfdmlld19yZXN1bHRzJykuaGlkZSg1MDApO1xyXG59KTtcclxuXHJcbiQoJ1tkYXRhLWFqYXhdJykuZWFjaChmdW5jdGlvbigpIHtcclxuXHR2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG5cdHZhciBhamF4ID0gJHRoaXMuYXR0cignZGF0YS1hamF4Jyk7XHJcblx0dmFyIGZpbHRlciA9ICR0aGlzLmF0dHIoJ2RhdGEtZmlsdGVyJyk7XHJcblxyXG5cdGlmIChhamF4ICE9PSAnZmFsc2UnKSB7XHJcblx0XHR2YXIgZm4gPSAoYWpheCAhPT0gJ3RydWUnKSA/IGFqYXggOiBudWxsO1xyXG5cdFx0ZmlsdGVyID0gKGZpbHRlciAhPT0gdW5kZWZpbmVkKSA/IHBocGJiLmdldEZ1bmN0aW9uQnlOYW1lKGZpbHRlcikgOiBudWxsO1xyXG5cclxuXHRcdHBocGJiLmFqYXhpZnkoe1xyXG5cdFx0XHRzZWxlY3RvcjogdGhpcyxcclxuXHRcdFx0cmVmcmVzaDogJHRoaXMuYXR0cignZGF0YS1yZWZyZXNoJykgIT09IHVuZGVmaW5lZCxcclxuXHRcdFx0ZmlsdGVyOiBmaWx0ZXIsXHJcblx0XHRcdGNhbGxiYWNrOiBmblxyXG5cdFx0fSk7XHJcblx0fVxyXG59KTtcclxuXHJcblxyXG4vKipcclxuICogVGhpcyBzaW1wbHkgYXBwZW5kcyAjcHJldmlldyB0byB0aGUgYWN0aW9uIG9mIHRoZVxyXG4gKiBRUiBhY3Rpb24gd2hlbiB5b3UgY2xpY2sgdGhlIEZ1bGwgRWRpdG9yICYgUHJldmlldyBidXR0b25cclxuICovXHJcbiQoJyNxcl9mdWxsX2VkaXRvcicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG5cdCQoJyNxcl9wb3N0Zm9ybScpLmF0dHIoJ2FjdGlvbicsIGZ1bmN0aW9uKGksIHZhbCkge1xyXG5cdFx0cmV0dXJuIHZhbCArICcjcHJldmlldyc7XHJcblx0fSk7XHJcbn0pO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBNYWtlIHRoZSBkaXNwbGF5IHBvc3QgbGlua3MgdG8gdXNlIEpTXHJcbiAqL1xyXG4kKCcuZGlzcGxheV9wb3N0JykuY2xpY2soZnVuY3Rpb24oZSkge1xyXG5cdC8vIERvIG5vdCBmb2xsb3cgdGhlIGxpbmtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdHZhciBwb3N0SWQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtcG9zdC1pZCcpO1xyXG5cdCQoJyNwb3N0X2NvbnRlbnQnICsgcG9zdElkKS5zaG93KCk7XHJcblx0JCgnI3Byb2ZpbGUnICsgcG9zdElkKS5zaG93KCk7XHJcblx0JCgnI3Bvc3RfaGlkZGVuJyArIHBvc3RJZCkuaGlkZSgpO1xyXG59KTtcclxuXHJcbi8qKlxyXG4qIFRvZ2dsZSB0aGUgbWVtYmVyIHNlYXJjaCBwYW5lbCBpbiBtZW1iZXJsaXN0LnBocC5cclxuKlxyXG4qIElmIHVzZXIgcmV0dXJucyB0byBzZWFyY2ggcGFnZSBhZnRlciB2aWV3aW5nIHJlc3VsdHMgdGhlIHNlYXJjaCBwYW5lbCBpcyBhdXRvbWF0aWNhbGx5IGRpc3BsYXllZC5cclxuKiBJbiBhbnkgY2FzZSB0aGUgbGluayB3aWxsIHRvZ2dsZSB0aGUgZGlzcGxheSBzdGF0dXMgb2YgdGhlIHNlYXJjaCBwYW5lbCBhbmQgbGluayB0ZXh0IHdpbGwgYmVcclxuKiBhcHByb3ByaWF0ZWx5IGNoYW5nZWQgYmFzZWQgb24gdGhlIHN0YXR1cyBvZiB0aGUgc2VhcmNoIHBhbmVsLlxyXG4qL1xyXG4kKCcjbWVtYmVyX3NlYXJjaCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHR2YXIgJG1lbWJlcmxpc3RTZWFyY2ggPSAkKCcjbWVtYmVybGlzdF9zZWFyY2gnKTtcclxuXHJcblx0JG1lbWJlcmxpc3RTZWFyY2guc2xpZGVUb2dnbGUoJ2Zhc3QnKTtcclxuXHRwaHBiYi5hamF4Q2FsbGJhY2tzLmFsdF90ZXh0LmNhbGwodGhpcyk7XHJcblxyXG5cdC8vIEZvY3VzIG9uIHRoZSB1c2VybmFtZSB0ZXh0Ym94IGlmIGl0J3MgYXZhaWxhYmxlIGFuZCBkaXNwbGF5ZWRcclxuXHRpZiAoJG1lbWJlcmxpc3RTZWFyY2guaXMoJzp2aXNpYmxlJykpIHtcclxuXHRcdCQoJyN1c2VybmFtZScpLmZvY3VzKCk7XHJcblx0fVxyXG5cdHJldHVybiBmYWxzZTtcclxufSk7XHJcblxyXG4vKipcclxuKiBBdXRvbWF0aWNhbGx5IHJlc2l6ZSB0ZXh0YXJlYVxyXG4qL1xyXG4kKGZ1bmN0aW9uKCkge1xyXG5cdHZhciAkdGV4dGFyZWEgPSAkKCd0ZXh0YXJlYTpub3QoI21lc3NhZ2UtYm94IHRleHRhcmVhLCAubm8tYXV0by1yZXNpemUpJyk7XHJcblx0cGhwYmIucmVzaXplVGV4dEFyZWEoJHRleHRhcmVhLCB7IG1pbkhlaWdodDogNzUsIG1heEhlaWdodDogMjUwIH0pO1xyXG5cdHBocGJiLnJlc2l6ZVRleHRBcmVhKCQoJ3RleHRhcmVhJywgJyNtZXNzYWdlLWJveCcpKTtcclxufSk7XHJcblxyXG5cclxufSkoalF1ZXJ5KTsgLy8gQXZvaWQgY29uZmxpY3RzIHdpdGggb3RoZXIgbGlicmFyaWVzXHJcbiJdfQ==
