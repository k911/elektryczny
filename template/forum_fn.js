function find_username(e){"use strict";return popup(e,760,570,"_usersearch"),!1}function popup(e,t,n,i){"use strict";return i||(i="_popup"),window.open(e.replace(/&amp;/g,"&"),i,"height="+n+",resizable=yes,scrollbars=yes, width="+t),!1}function pageJump(e){"use strict";var t=parseInt(e.val(),10),n=e.attr("data-per-page"),i=e.attr("data-base-url"),s=e.attr("data-start-name");null!==t&&!isNaN(t)&&t===Math.floor(t)&&t>0&&(-1===i.indexOf("?")?document.location.href=i+"?"+s+"="+(t-1)*n:document.location.href=i.replace(/&amp;/g,"&")+"&"+s+"="+(t-1)*n)}function marklist(e,t,n){"use strict";jQuery("#"+e+" input[type=checkbox][name]").each(function(){var e=jQuery(this);e.attr("name").substr(0,t.length)===t&&e.prop("checked",n)})}function viewableArea(e,t){"use strict";e&&(t||(e=e.parentNode),e.vaHeight?(e.style.height=e.vaHeight+"px",e.style.overflow="auto",e.style.maxHeight=e.vaMaxHeight,e.vaHeight=!1):(e.vaHeight=e.offsetHeight,e.vaMaxHeight=e.style.maxHeight,e.style.height="auto",e.style.maxHeight="none",e.style.overflow="visible"))}function activateSubPanel(e,t){"use strict";var n,i;for("string"==typeof e&&(i=e),$('input[name="show_panel"]').val(i),void 0===t&&(t=jQuery(".sub-panels a[data-subpanel]").map(function(){return this.getAttribute("data-subpanel")})),n=0;n<t.length;n++)jQuery("#"+t[n]).css("display",t[n]===i?"block":"none"),jQuery("#"+t[n]+"-tab").toggleClass("activetab",t[n]===i)}function selectCode(e){"use strict";var t,n,i=e.parentNode.parentNode.getElementsByTagName("CODE")[0];if(window.getSelection)if(t=window.getSelection(),t.setBaseAndExtent){var s=i.innerText.length>1?i.innerText.length-1:1;try{t.setBaseAndExtent(i,0,i,s)}catch(e){n=document.createRange(),n.selectNodeContents(i),t.removeAllRanges(),t.addRange(n)}}else window.opera&&"<BR>"===i.innerHTML.substring(i.innerHTML.length-4)&&(i.innerHTML=i.innerHTML+"&nbsp;"),n=document.createRange(),n.selectNodeContents(i),t.removeAllRanges(),t.addRange(n);else document.getSelection?(t=document.getSelection(),n=document.createRange(),n.selectNodeContents(i),t.removeAllRanges(),t.addRange(n)):document.selection&&(n=document.body.createTextRange(),n.moveToElementText(i),n.select())}function play_qt_file(e){"use strict";var t,n,i=e.GetRectangle();if(i){i=i.split(",");var s=parseInt(i[0],10),a=parseInt(i[2],10),o=parseInt(i[1],10),r=parseInt(i[3],10);t=s<0?-1*s+a:a-s,n=o<0?-1*o+r:r-o}else t=200,n=0;e.width=t,e.height=n+16,e.SetControllerVisible(!0),e.Play()}function phpbbCheckKey(e){"use strict";return!e.keyCode||40!==e.keyCode&&38!==e.keyCode||(inAutocomplete=!0),!inAutocomplete||lastKeyEntered&&lastKeyEntered!==e.which?13!==e.which&&(lastKeyEntered=e.which,!0):(inAutocomplete=!1,!0)}function insertUser(e,t){"use strict";var n=jQuery(e),i=n.attr("data-form-name"),s=n.attr("data-field-name"),a=opener.document.forms[i][s];a.value.length&&"textarea"===a.type&&(t=a.value+"\n"+t),a.value=t}function insert_marked_users(e,t){"use strict";for(var n=0;n<t.length;n++)t[n].checked&&insertUser(e,t[n].value);window.close()}function insert_single_user(e,t){"use strict";insertUser(e,t),window.close()}function adjustPosterProfile(e){var t=e.parent().prev(),n=t.parent(),i=t.hasClass("resized");if(n.width()<t.width()+e.width())return i&&function(){t.removeClass("resized").css("min-height","")}(),!1;i&&t.css("min-height",""),t.css("min-height",Math.floor(e.height())+"px").addClass("resized")}function checkNavigation(e){function t(e){e.responsive=!1,e.lastWidth=0,e.itemCount=0,e.contents=e.menu.find(".dropdown-contents:first"),e.canToggle=$(),e.noToggle=$(),e.contents.children(".separator:last-child").hide(),e.items=e.lists.children().not(e.menu).each(function(t){var n,i=$(this);if(i.is(".not-responsive, .responsive-menu, .dropdown-container, .selected")||"true"==i.attr("data-skip-responsive"))return i.attr("data-responsive-index",-1),void(e.noToggle=e.noToggle.add(i));n=(void 0===i.attr("data-responsive-class")?i.hasClass("small-icon")?i.attr("class"):"":i.attr("data-responsive-class"))+" responsive-index-"+t,e.contents.append(i.clone(!0).attr("class",n).addClass("responsive-clone").removeClass("tab")),i.addClass("responsive-cloned-item").attr("data-clone-index",t),e.canToggle=e.canToggle.add(i),e.itemCount++}),e.contents.find("a.nav-link").removeClass("nav-link"),e.responsiveClones=e.contents.children(".responsive-clone").hide(),e.initialized=!0}for(var n=0;n<styleConfig._responsiveNavigation.length;n++)!function(e,n){var i,s,a,o;e.initialized||(t(e),n=!0),e.itemCount&&(i=e.container.width(),(n||i!=e.lastWidth)&&(e.lastWidth=i,e.responsive&&(e.canToggle.show(),e.responsiveClones.hide(),e.menu.removeClass("showing-responsive-menu"),e.alwaysShowMenu||e.menu.show()),e.responsive=!1,a=e.menu.outerWidth(!0),s=a,e.noToggle.each(function(){var e=$(this);e.is(":visible")&&(s+=e.outerWidth(!0))}),o=s>=i,e.canToggle.each(function(){var t,n=$(this);if(n.is(":visible")){if(!o){if(!(t=n.outerWidth(!0)))return void n.hide();(s+=t)>=i&&(o=!0)}o&&(n.hide(),e.responsiveClones.filter(".responsive-index-"+n.attr("data-clone-index")).show())}}),e.responsive=o,o||e.alwaysShowMenu?o&&e.menu.addClass("showing-responsive-menu"):e.menu.hide()))}(styleConfig._responsiveNavigation[n],e)}function initResponsiveNavigation(){styleConfig._responsiveNavigation=[],$(".nav-tabs, .navbar.secondary").each(function(){var e=$(this),t=e.children("ul"),n=t.children(".responsive-menu:first"),i=n.length>0;if(!n.length){if(e.is(".nav-tabs"))return;t.eq(0).prepend('<li class="responsive-menu dropdown-container" style="display: none;"><a href="#" class="dropdown-trigger dropdown-toggle"><i class="mdi mdi-menu" aria-hidden="true"></a><div class="dropdown hidden"><div class="pointer"><div class="pointer-inner"></div></div><ul class="dropdown-contents" /></ul></div></li>'),n=t.children(".responsive-menu:first"),phpbb.registerDropdown(n.find(".dropdown-toggle"),n.find(".dropdown"))}styleConfig._responsiveNavigation.push({container:e,lists:t,menu:n,initialized:!1,alwaysShowMenu:i})})}function parseDocument(e){"use strict";var t=document.createElement("div"),n=void 0===t.style.borderRadius,i=$("body");e.find(".nav-tabs").each(function(){var e=$(this).children().children();e.not(".tab").each(function(){var e,t=$(this),n=t.attr("class").split(" ");for(t.attr("class","tab"),e=0;e<n.length;e++)"icon-"==n[e].substr(0,5)&&t.addClass(n[e].substr(5))}).children(":first-child").addClass("nav-link"),e.each(function(){var e=$(this),t="";if(!e.attr("title")){if(t=e.children(".nav-link").text().trim(),!t.length)return;e.children(".nav-link + strong").each(function(){t+=" ("+$(this).text().trim()+")"}),e.attr("title",t)}})}),e.find(".nav-tabs[data-current-page]").each(function(){var t,n,i,s,a=$(this),o=a.attr("data-current-page"),r=!1;if($(".tab[data-select-match]",this).each(function(){var e,t,n,i=$(this).attr("data-select-match").split(",");for(e=0;e<i.length;e++)if(t=i[e].trim(),-1!=o.indexOf(t))return n=$(this),n.hasClass("selected")||(a.find(".tab.selected").removeClass("selected"),n.addClass("selected")),r=!0,!1}),!r&&(t=e.find(".content.pages-content"),t.length)){for(n=t.prop("class").split(" "),i=0;i<n.length&&!r;i++)"content"!==(s=n[i].trim())&&"pages-content"!==s&&e.find(".tab.pages."+s).each(function(){a.find(".tab.selected").removeClass("selected"),$(this).addClass("selected"),r=!0});if(r)return;e.find(".tab.pages:first").each(function(){a.find(".tab.selected").removeClass("selected"),$(this).addClass("selected"),r=!0})}}),e.find("input[data-reset-on-edit]").on("keyup",function(){$(this.getAttribute("data-reset-on-edit")).val("")}),e.find(".pagination .page-jump-form :button").click(function(){pageJump($(this).siblings("input.inputbox"))}),e.find(".pagination .page-jump-form input.inputbox").on("keypress",function(e){13!==e.which&&13!==e.keyCode||(e.preventDefault(),pageJump($(this)))}),e.find(".pagination .dropdown-trigger").click(function(){var e=$(this).parent();setTimeout(function(){e.hasClass("dropdown-visible")&&e.find("input.inputbox").focus()},100)}),e.find(".navlinks").each(function(){function e(){var e,s=0,o=n.outerWidth(!0)-n.width(),r=Math.max(t.width()/3,240);a=!1,i.each(function(){var e=$(this);e.is(":visible")&&(s+=e.outerWidth(!0))}),e=t.width()-s-o,n.css("max-width",Math.floor(Math.max(e,r))+"px")}var t=$(this),n=t.children().not(".rightside"),i=t.children(".rightside"),s=!1,a=!1;1===n.length&&i.length&&(e(),$(window).resize(function(){a?s=!0:(e(),a=!0,s=!1,setTimeout(function(){a=!1,s&&e()},250))}))}),e.find(".breadcrumbs:not([data-skip-responsive])").each(function(){function e(){var e,c=t.height();if(e=parseInt(t.css("max-width"),10),e||(e=i.width()),h=!1,r=parseInt(t.css("line-height"),10),n.each(function(){$(this).height()>0&&(r=Math.max(r,$(this).outerHeight(!0)))}),!(c<=r&&(!l||!1===d||d>=e)||(d=e,l&&(t.removeClass("wrapped").find(".crumb.wrapped").removeClass("wrapped "+a.join(" ")),t.height()<=r)||(l=!0,t.addClass("wrapped"),t.height()<=r))))for(var p=0;p<o;p++)for(var u=s-1;u>=0;u--)if(n.eq(u).addClass("wrapped "+a[p]),t.height()<=r)return}var t=$(this),n=t.find(".crumb"),s=n.length,a=["wrapped-max","wrapped-wide","wrapped-medium","wrapped-small","wrapped-tiny"],o=a.length,r=0,d=!1,l=!1,c=!1,h=!1;t.find("a").each(function(){var e=$(this);e.attr("title",e.text())}),e(),$(window).resize(function(){h?c=!0:(e(),h=!0,c=!1,setTimeout(function(){h=!1,c&&e()},250))})});e.find(".linklist:not(.navlinks, [data-skip-responsive]),.postbody .post-buttons:not([data-skip-responsive])").each(function(){function e(){var e=i.width();if(!(v&&f&&e<=u||(u=e,(g||v)&&(a.removeClass("hidden"),h.children(".clone").addClass("hidden"),g=v=!1),f&&(t.removeClass("compact"),f=!1),d&&p?c.removeClass("hidden"):c.addClass("hidden"),t.height()<=w||(f||(t.addClass("compact"),f=!0),t.height()<=w)))){if(f&&(t.removeClass("compact"),f=!1),!m){var n=o.clone();h.prepend(n.addClass("clone clone-first").removeClass("leftside rightside")),t.hasClass("post-buttons")&&($(".button",h).removeClass("button icon-button"),$(".responsive-menu-link",c).addClass("button icon-button").prepend("<span></span>")),m=!0}if(g||(o.addClass("hidden"),g=!0,h.children(".clone-first").removeClass("hidden"),c.removeClass("hidden")),!(t.height()<=w)&&(f||(t.addClass("compact"),f=!0),!(t.height()<=w)&&r.length)){if(f&&(t.removeClass("compact"),f=!1),!b){var s=r.clone();h.prepend(s.addClass("clone clone-last").removeClass("leftside rightside")),b=!0}v||(r.addClass("hidden"),v=!0,h.children(".clone-last").removeClass("hidden")),t.height()<=w||f||(t.addClass("compact"),f=!0)}}}var t=$(this),n=".edit-icon, .quote-icon, [data-last-responsive]",s=t.children(),a=s.not(".breadcrumbs, [data-skip-responsive]"),o=a.not(n),r=a.filter(n),d="nav-main"===t.attr("id"),l='<li class="responsive-menu hidden"><a href="javascript:void(0);" class="responsive-menu-link"></a><div class="dropdown hidden"><div class="pointer"><div class="pointer-inner" /></div><ul class="dropdown-contents" /></div></li>';d||(a.is(".rightside")?(a.filter(".rightside:first").before(l),t.children(".responsive-menu").addClass("rightside")):t.append(l));var c=t.children(".responsive-menu"),h=c.find(".dropdown-contents"),p=h.find("li:not(.separator)").length,u=!1,f=!1,g=!1,v=!1,m=!1,b=!1,w=0;s.each(function(){$(this).height()&&(w=Math.max(w,$(this).outerHeight(!0)))}),w<1||(w+=3,d||phpbb.registerDropdown(c.find("a.responsive-menu-link"),c.find(".dropdown"),!1),s.find("img").each(function(){$(this).load(function(){e()})}),e(),$(window).resize(e))}),e.find(".postbody").each(function(){var e=$(this),t=e.children();1==t.length&&t.is("div")||e.wrapInner('<div class="postbody-inner" />')}),$(".postprofile").each(function(e){var t=Math.max(28-e,2);$(this).css("z-index",t)}),n||(e.find("ul.topiclist dd.mark").siblings("dt").children(".list-inner").addClass("with-mark"),e.find(".topiclist.responsive-show-all > li > dl").each(function(){var e=$(this),t=e.find("dt .responsive-show:last-child"),n=!0;t.length?n=0===$.trim(t.text()).length:(e.find("dt > .list-inner").append('<div class="responsive-show" style="display:none;" />'),t=e.find("dt .responsive-show:last-child")),e.find("dd").not(".mark").each(function(){var e=$(this),i=e.children(),s=e.html();1===i.length&&i.text()===e.text()&&(s=i.html()),t.append((n?"":"<br />")+s),n=!1})}),e.find(".topiclist.responsive-show-columns").each(function(){var e=$(this),t=[],n=0;e.prev(".topiclist").find("li.header dd").not(".mark").each(function(){t.push($(this).text()),n++}),n&&e.find("dl").each(function(){var e=$(this),i=e.find("dt .responsive-show:last-child"),s=!0;i.length?s=0===$.trim(i.text()).length:(e.find("dt > .list-inner").append('<div class="responsive-show" style="display:none;" />'),i=e.find("dt .responsive-show:last-child")),e.find("dd").not(".mark").each(function(e){var a=$(this),o=a.children(),r=a.html();1===o.length&&o.text()===a.text()&&(r=o.html()),e<n&&(r=t[e]+": <strong>"+r+"</strong>"),i.append((s?"":"<br />")+r),s=!1})})}),e.find("table.table1").not(".not-responsive").each(function(){var e,t,n=$(this),i=n.find("thead > tr > th"),s=[],a=0;if(i.each(function(t){var i=$(this),o=parseInt(i.attr("colspan"),10),r=i.attr("data-dfn"),d=r||i.text();for(o=isNaN(o)||o<1?1:o,e=0;e<o;e++)s.push(d);a++,r&&!t&&n.addClass("show-header")}),t=s.length,n.addClass("responsive"),a<2)return void n.addClass("show-header");n.find("tbody > tr").each(function(){var e=$(this),n=e.children("td"),i=0;if(1===n.length)return void e.addClass("big-column");n.each(function(){var e=$(this),n=parseInt(e.attr("colspan"),10),a=$.trim(e.text());t<=i||(a.length&&"-"!==a||e.children().length?e.prepend('<dfn style="display: none;">'+s[i]+"</dfn>"):e.addClass("empty"),n=isNaN(n)||n<1?1:n,i+=n)})})}),e.find("table.responsive > tbody").not(".responsive-skip-empty").each(function(){$(this).children("tr").length||$(this).parent("table:first").addClass("responsive-hide")}),e.find("#tabs, #minitabs").not("[data-skip-responsive]").each(function(){function e(){var n=i.width(),a=t.height();if(arguments.length||c&&!(n<=l)||!(a<=d)){if(s.show(),o.hide(),l=n,(a=t.height())<=d)return void(o.hasClass("dropdown-visible")&&phpbb.toggleDropdown.call(o.find("a.responsive-tab-link").get(0)));c=!0,o.show(),r.html("");var h,p,u=s.filter(":not(.activetab, .responsive-tab)"),f=u.length;for(h=f-1;h>=0;h--)if(p=u.eq(h),r.prepend(p.clone(!0).removeClass("tab")),p.hide(),t.height()<=d)return void r.find("a").click(function(){e(!0)});r.find("a").click(function(){e(!0)})}}var t=$(this),n=t.children(),s=n.children().not("[data-skip-responsive]"),a=s.children("a"),o=n.append('<li class="tab responsive-tab" style="display:none;"><a href="javascript:void(0);" class="responsive-tab-link">&nbsp;</a><div class="dropdown tab-dropdown" style="display: none;"><div class="pointer"><div class="pointer-inner" /></div><ul class="dropdown-contents" /></div></li>').find("li.responsive-tab"),r=o.find(".dropdown-contents"),d=0,l=!1,c=!1;a.each(function(){var e=$(this);d=Math.max(d,Math.max(e.outerHeight(!0),e.parent().outerHeight(!0)))});var h=o.find("a.responsive-tab-link");phpbb.registerDropdown(h,o.find(".dropdown"),{visibleClass:"activetab"}),e(!0),$(window).resize(e)}),e.find("#navigation").each(function(){1===$(this).children("ol, ul").children("li").length&&$(this).addClass("responsive-hide")}),e.find("[data-responsive-text]").each(function(){function e(){if($(window).width()>700){if(!s)return;return t.text(n),void(s=!1)}s||(t.text(i),s=!0)}var t=$(this),n=t.text(),i=t.attr("data-responsive-text"),s=!1;e(),$(window).resize(e)}),styleConfig.staticNavigation&&e.find(".navbar.tabbed > .inner").each(function(e){function t(){$("#page-header-box").css("padding-top",Math.floor(o.height())+"px"),o.addClass("static"),d.removeClass("not-static"),r=!0,checkNavigation(!0)}function n(){$("#page-header-box").css("padding-top",0),g.attr("data-card",0),v.attr("data-card",1),o.removeClass("static"),d.addClass("not-static"),r=!1,checkNavigation(!0)}function i(){(window.location.hash?window.location.hash:"")&&window.scrollTo(l.scrollLeft(),l.scrollTop()-o.height())}function s(e){var s,o=Math.floor(l.width());if(o<h||l.height()<p)return void(r&&n());if(!r){if((s=a.getBoundingClientRect().top)>0)return;return c=l.scrollTop()+s,t(),void(e&&i())}l.scrollTop()<c?n():e&&i()}var a=this,o=$(a),r=!1,d=o.parent(),l=$(window),c=0,h=styleConfig.staticNavigationMinWidth,p=styleConfig.staticNavigationMinHeight,u=!1,f=!1,g=$(".inner.page-width.card"),v=$("#page-header-box.card"),m=0,b=0,w=0;l.on("scroll resize",function(){r?(f?u=!0:(s(!1),f=!0,u=!1,setTimeout(function(){f=!1,u&&s(!1)},250)),b=l.scrollTop(),m=v.height(),Math.abs(b-w)>Math.abs(m-w)&&(b<m?(g.attr("data-card",0),v.attr("data-card",1)):(g.attr("data-card",1),v.attr("data-card",0)),w=b)):s(!1)}),l.on("load",function(){s(!0)}),l.on("hashchange",function(){s(!0)})}),e.find("dd.lastpost > span:only-child > br:only-child").parents("dd.lastpost").addClass("empty"),$("a.spoiler").click(function(e){e.preventDefault(),$(this).next("div.spoiler").show(),$(this).hide()}),window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi), (min-resolution: 1.5dppx)").matches&&e.find("img[data-src-hd]").each(function(){function e(){n.css("width",(t.naturalWidth?t.naturalWidth:t.width)+"px"),t.setAttribute("src",t.getAttribute("data-src-hd"))}var t=this,n=$(this),i=new Image,s=!1,a=!1;t.complete?a=!0:t.onload=function(){a||(a=!0,s&&e())},i.onload=function(){s=!0,a&&e()},i.src=t.getAttribute("data-src-hd")}),e.find("div.buttons a.button.icon-button").each(function(){var e,t=$(this);t.children().length||(e=t.text().trim().split(" "),e.length>1&&(t.text(e.shift()+" ").append("<strong />"),t.find("strong").text(e.join(" "))))}),$("#phpbb.can-transform[data-online-text]").each(function(){var t=$(this).attr("data-online-text");e.find(".online").each(function(){$(this).css("position","relative").append('<span class="online-ribbon"><span>'+t+"</span><span>"+t+"</span></span>")})}),styleConfig._loaded&&e.find(".postprofile + .postbody > div:only-child").each(function(){adjustPosterProfile($(this))}),styleConfig.collapseForums&&e.find(".forabg li.header").each(function(){var e,t=$(this),n=t.parent().next("ul.forums"),i=0,s=!1;1==n.length&&($("a[data-id]",t).each(function(){i=parseInt(this.getAttribute("data-id"))}),i||n.find(".forumtitle[data-id]:first").each(function(){i=parseInt(this.getAttribute("data-id")),isNaN(i)||(i="f"+i)}),i&&(t.append('<a class="forum-toggle" href="#"></a>'),e=t.find(".forum-toggle"),e.click(function(t){if(t.preventDefault(),s)return n.stop(!0,!0).slideDown(200),s=!1,e.removeClass("toggled"),void phpbb.deleteCookie("toggled-"+i,styleConfig.cookieConfig);n.stop(!0,!0).slideUp(200),s=!0,e.addClass("toggled"),phpbb.setCookie("toggled-"+i,"1",styleConfig.cookieConfig)}),"1"==phpbb.getCookie("toggled-"+i,styleConfig.cookieConfig)&&(n.stop(!0,!0).slideUp(0),s=!0,e.addClass("toggled"))))}))}var styleConfig={staticNavigation:!0,staticNavigationMinWidth:700,staticNavigationMinHeight:400,extendPosterProfile:!0,collapseForums:!0};jQuery(function(e){"use strict";e(".sub-panels").each(function(){var t=e("a[data-subpanel]",this),n=t.map(function(){return this.getAttribute("data-subpanel")}),i=this.getAttribute("data-show-panel");n.length&&(activateSubPanel(i,n),t.click(function(){return activateSubPanel(this.getAttribute("data-subpanel"),n),!1}))})});var inAutocomplete=!1,lastKeyEntered="";jQuery(function(e){"use strict";e("form input[type=text], form input[type=password]").on("keypress",function(t){var n=e(this).parents("form").find("input[type=submit].default-submit-action");return!n||n.length<=0||(!!phpbbCheckKey(t)||(!(t.which&&13===t.which||t.keyCode&&13===t.keyCode)||(n.click(),!1)))})}),jQuery(function(e){"use strict";function t(){styleConfig._resizeThrottled=!1,checkNavigation(!1),styleConfig.extendPosterProfile&&e(".postprofile + .postbody > div:only-child").each(function(){adjustPosterProfile(e(this))})}var n,i,s=["transform","webkitTransform","msTransform"];for(styleConfig.cookieConfig={prefix:"",path:"/",expires:new Date},styleConfig.cookieConfig.expires.setFullYear(styleConfig.cookieConfig.expires.getFullYear()+1),e("#phpbb.nojs").toggleClass("nojs hasjs"),e("#phpbb").toggleClass("hastouch",phpbb.isTouch),e("#phpbb.hastouch").removeClass("notouch"),e("form[data-focus]:first").each(function(){e("#"+this.getAttribute("data-focus")).focus()}),i=e("#phpbb").get(0),n=0;n<s.length;n++)if(void 0!==i.style[s[n]]){e("#phpbb").addClass("can-transform");break}phpbb.setCookie=function(t,n,i){return i=e.extend({prefix:"",path:"/"},"object"==typeof i?i:{}),document.cookie=i.prefix+t+"="+encodeURIComponent(n)+(void 0===i.expires?"":";expires="+i.expires.toUTCString())+(i.path?";path="+i.path:"")+(i.domain?";domain="+i.domain:""),n},phpbb.getCookie=function(t,n){var i,s;return n=e.extend({prefix:"",path:"/"},"object"==typeof n?n:{}),i=new RegExp("(^| )"+n.prefix+t+"=([^;]+)(;|$)"),s=i.exec(document.cookie),s?decodeURIComponent(s[2]):null},phpbb.deleteCookie=function(t,n){return n=e.extend({prefix:"",path:"/"},"object"==typeof n?n:{}),document.cookie=n.prefix+t+"="+(n.path?"; path="+n.path:"")+(n.domain?"; domain="+n.domain:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT",null},initResponsiveNavigation(),parseDocument(e("body")),checkNavigation(!0),styleConfig._loaded=!0,styleConfig._resizeThrottled=!1,styleConfig._resizeQueued=!1,e(window).load(function(){checkNavigation(!0),styleConfig.extendPosterProfile&&e(".postprofile + .postbody > div:only-child").each(function(){adjustPosterProfile(e(this))})}),e(window).resize(function(){styleConfig._resizeThrottled?styleConfig._resizeQueued=!0:(t(),styleConfig._resizeThrottled=!0,styleConfig._resizeQueued=!1,setTimeout(function(){styleConfig._resizeThrottled=!1,styleConfig._resizeQueued&&t()},500))})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcnVtX2ZuLmpzIl0sIm5hbWVzIjpbImZpbmRfdXNlcm5hbWUiLCJ1cmwiLCJwb3B1cCIsIndpZHRoIiwiaGVpZ2h0IiwibmFtZSIsIndpbmRvdyIsIm9wZW4iLCJyZXBsYWNlIiwicGFnZUp1bXAiLCJpdGVtIiwicGFnZSIsInBhcnNlSW50IiwidmFsIiwicGVyUGFnZSIsImF0dHIiLCJiYXNlVXJsIiwic3RhcnROYW1lIiwiaXNOYU4iLCJNYXRoIiwiZmxvb3IiLCJpbmRleE9mIiwiZG9jdW1lbnQiLCJsb2NhdGlvbiIsImhyZWYiLCJtYXJrbGlzdCIsImlkIiwic3RhdGUiLCJqUXVlcnkiLCJlYWNoIiwiJHRoaXMiLCJ0aGlzIiwic3Vic3RyIiwibGVuZ3RoIiwicHJvcCIsInZpZXdhYmxlQXJlYSIsImUiLCJpdHNlbGYiLCJwYXJlbnROb2RlIiwidmFIZWlnaHQiLCJzdHlsZSIsIm92ZXJmbG93IiwibWF4SGVpZ2h0IiwidmFNYXhIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJhY3RpdmF0ZVN1YlBhbmVsIiwicCIsInBhbmVscyIsImkiLCJzaG93UGFuZWwiLCIkIiwibWFwIiwiZ2V0QXR0cmlidXRlIiwiY3NzIiwidG9nZ2xlQ2xhc3MiLCJzZWxlY3RDb2RlIiwiYSIsInMiLCJyIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRTZWxlY3Rpb24iLCJzZXRCYXNlQW5kRXh0ZW50IiwibCIsImlubmVyVGV4dCIsImVycm9yIiwiY3JlYXRlUmFuZ2UiLCJzZWxlY3ROb2RlQ29udGVudHMiLCJyZW1vdmVBbGxSYW5nZXMiLCJhZGRSYW5nZSIsIm9wZXJhIiwiaW5uZXJIVE1MIiwic3Vic3RyaW5nIiwic2VsZWN0aW9uIiwiYm9keSIsImNyZWF0ZVRleHRSYW5nZSIsIm1vdmVUb0VsZW1lbnRUZXh0Iiwic2VsZWN0IiwicGxheV9xdF9maWxlIiwib2JqIiwicmVjdGFuZ2xlIiwiR2V0UmVjdGFuZ2xlIiwic3BsaXQiLCJ4MSIsIngyIiwieTEiLCJ5MiIsIlNldENvbnRyb2xsZXJWaXNpYmxlIiwiUGxheSIsInBocGJiQ2hlY2tLZXkiLCJldmVudCIsImtleUNvZGUiLCJpbkF1dG9jb21wbGV0ZSIsImxhc3RLZXlFbnRlcmVkIiwid2hpY2giLCJpbnNlcnRVc2VyIiwiZm9ybUlkIiwidmFsdWUiLCIkZm9ybSIsImZvcm1OYW1lIiwiZmllbGROYW1lIiwib3BlbmVyIiwiZm9ybXMiLCJ0eXBlIiwiaW5zZXJ0X21hcmtlZF91c2VycyIsInVzZXJzIiwiY2hlY2tlZCIsImNsb3NlIiwiaW5zZXJ0X3NpbmdsZV91c2VyIiwidXNlciIsImFkanVzdFBvc3RlclByb2ZpbGUiLCJwb3N0Ym9keSIsInByb2ZpbGUiLCJwYXJlbnQiLCJwcmV2IiwicG9zdCIsInJlc2l6ZWQiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJjaGVja05hdmlnYXRpb24iLCJmb3JjZSIsImluaXQiLCJuYXYiLCJyZXNwb25zaXZlIiwibGFzdFdpZHRoIiwiaXRlbUNvdW50IiwiY29udGVudHMiLCJtZW51IiwiZmluZCIsImNhblRvZ2dsZSIsIm5vVG9nZ2xlIiwiY2hpbGRyZW4iLCJoaWRlIiwiaXRlbXMiLCJsaXN0cyIsIm5vdCIsImNsb25lQ2xhc3MiLCJpcyIsImFkZCIsInVuZGVmaW5lZCIsImFwcGVuZCIsImNsb25lIiwicmVzcG9uc2l2ZUNsb25lcyIsImluaXRpYWxpemVkIiwic3R5bGVDb25maWciLCJfcmVzcG9uc2l2ZU5hdmlnYXRpb24iLCJjb250YWluZXJXaWR0aCIsIm1lbnVXaWR0aCIsImhpZGluZyIsImNvbnRhaW5lciIsInNob3ciLCJhbHdheXNTaG93TWVudSIsIm91dGVyV2lkdGgiLCJpdGVtV2lkdGgiLCJmaWx0ZXIiLCJpbml0UmVzcG9uc2l2ZU5hdmlnYXRpb24iLCJlcSIsInByZXBlbmQiLCJwaHBiYiIsInJlZ2lzdGVyRHJvcGRvd24iLCJwdXNoIiwicGFyc2VEb2N1bWVudCIsIiRjb250YWluZXIiLCJ0ZXN0IiwiY3JlYXRlRWxlbWVudCIsIm9sZEJyb3dzZXIiLCJib3JkZXJSYWRpdXMiLCIkYm9keSIsInRhYnMiLCJ0YWIiLCJjbGFzc05hbWUiLCJ0aXRsZSIsInRleHQiLCJ0cmltIiwiY29udGVudCIsImNsYXNzZXMiLCJrZXkiLCJjdXJyZW50IiwiZm91bmQiLCJtYXRjaCIsIm1hdGNoZXMiLCJvbiIsImNsaWNrIiwic2libGluZ3MiLCJwcmV2ZW50RGVmYXVsdCIsIiRkcm9wZG93bkNvbnRhaW5lciIsInNldFRpbWVvdXQiLCJmb2N1cyIsInJlc2l6ZSIsIm1heFdpZHRoIiwiZGlmZiIsIiRsZWZ0IiwibWluV2lkdGgiLCJtYXgiLCJ0aHJvdHRsZWQiLCIkcmlnaHQiLCJxdWV1ZWQiLCJjaGVjayIsIiRsaW5rcyIsIm91dGVySGVpZ2h0Iiwid3JhcHBlZCIsImpvaW4iLCJjbGFzc2VzTGVuZ3RoIiwiaiIsIiRsaW5rIiwicmVzcG9uc2l2ZTIiLCJjb21wYWN0IiwicmVzcG9uc2l2ZTEiLCIkbGlua3NOb3RTa2lwIiwiJG1lbnVDb250ZW50cyIsInBlcnNpc3RlbnQiLCJwZXJzaXN0ZW50Q29udGVudCIsIiRtZW51IiwiY29waWVkMSIsIiRjbG9uZXMxIiwiJGxpbmtzRmlyc3QiLCIkbGlua3NMYXN0IiwiY29waWVkMiIsIiRjbG9uZXMyIiwiZmlsdGVyTGFzdCIsIiRsaW5rc0FsbCIsImh0bWwiLCJiZWZvcmUiLCJsb2FkIiwid3JhcElubmVyIiwieiIsIiRibG9jayIsImZpcnN0IiwiY29sdW1uIiwiJGNoaWxkcmVuIiwiJGxpc3QiLCJoZWFkZXJzIiwiaGVhZGVyc0xlbmd0aCIsIiR0aCIsInRvdGFsSGVhZGVycyIsImNlbGwiLCJjb2xzcGFuIiwiZGZuIiwicm93IiwiY2VsbHMiLCJhcmd1bWVudHMiLCIkdGFicyIsIiRpdGVtIiwidG9nZ2xlRHJvcGRvd24iLCJjYWxsIiwiZ2V0IiwiJHRhYiIsIiRhdmFpbGFibGVUYWJzIiwidG90YWwiLCIkdWwiLCIkdGFiTGluayIsInZpc2libGVDbGFzcyIsImZ1bGxUZXh0IiwicmVzcG9uc2l2ZVRleHQiLCJzdGF0aWNOYXZpZ2F0aW9uIiwiZW5hYmxlU3RhdGljIiwibmF2aWdhdGlvbiIsImlzU3RhdGljIiwiZGlzYWJsZVN0YXRpYyIsIm5hdmJhckJveCIsImhlYWRlckJveCIsInRlc3RIYXNoIiwiaGFzaCIsInNjcm9sbFRvIiwiJHciLCJzY3JvbGxMZWZ0Iiwic2Nyb2xsVG9wIiwiY2hlY2tIYXNoIiwidG9wIiwid2luZG93V2lkdGgiLCJtaW5IZWlnaHQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJtaW5Ub3BQb3NpdGlvbiIsInN0YXRpY05hdmlnYXRpb25NaW5XaWR0aCIsInN0YXRpY05hdmlnYXRpb25NaW5IZWlnaHQiLCJicmVha0xpbmUiLCJjdXJyT2Zmc2V0IiwicHJldk9mZnNldCIsImFicyIsInBhcmVudHMiLCJuZXh0IiwibWF0Y2hNZWRpYSIsInJlcGxhY2VJbWFnZSIsImltZyIsIm5hdHVyYWxXaWR0aCIsInNldEF0dHJpYnV0ZSIsImhkSW1hZ2UiLCJJbWFnZSIsImhkTG9hZGVkIiwibm9ybWFsTG9hZGVkIiwiY29tcGxldGUiLCJvbmxvYWQiLCJzcmMiLCJ3b3JkcyIsInNoaWZ0IiwiX2xvYWRlZCIsImNvbGxhcHNlRm9ydW1zIiwidG9nZ2xlIiwiZm9ydW0iLCJ0b2dnbGVkIiwic3RvcCIsInNsaWRlRG93biIsImRlbGV0ZUNvb2tpZSIsImNvb2tpZUNvbmZpZyIsInNsaWRlVXAiLCJzZXRDb29raWUiLCJnZXRDb29raWUiLCJleHRlbmRQb3N0ZXJQcm9maWxlIiwiJGNoaWxkTm9kZXMiLCJkZWZhdWx0QnV0dG9uIiwicHJvY2Vzc1Jlc2l6ZUV2ZW50IiwiX3Jlc2l6ZVRocm90dGxlZCIsInRyYW5zZm9ybXMiLCJwcmVmaXgiLCJwYXRoIiwiZXhwaXJlcyIsIkRhdGUiLCJzZXRGdWxsWWVhciIsImdldEZ1bGxZZWFyIiwiaXNUb3VjaCIsImNvbmZpZyIsImV4dGVuZCIsImNvb2tpZSIsImVuY29kZVVSSUNvbXBvbmVudCIsInRvVVRDU3RyaW5nIiwiZG9tYWluIiwiZXhwciIsIlJlZ0V4cCIsImV4ZWMiLCJkZWNvZGVVUklDb21wb25lbnQiLCJfcmVzaXplUXVldWVkIl0sIm1hcHBpbmdzIjoiQUFnQkEsUUFBU0EsZUFBY0MsR0FDckIsWUFHQSxPQURBQyxPQUFNRCxFQUFLLElBQUssSUFBSyxnQkFDZCxFQU1ULFFBQVNDLE9BQU1ELEVBQUtFLEVBQU9DLEVBQVFDLEdBQ2pDLFlBT0EsT0FMS0EsS0FDSEEsRUFBTyxVQUdUQyxPQUFPQyxLQUFLTixFQUFJTyxRQUFRLFNBQVUsS0FBTUgsRUFBTSxVQUFZRCxFQUFTLHdDQUEwQ0QsSUFDdEcsRUFNVCxRQUFTTSxVQUFTQyxHQUNoQixZQUVBLElBQUlDLEdBQU9DLFNBQVNGLEVBQUtHLE1BQU8sSUFDNUJDLEVBQVVKLEVBQUtLLEtBQUssaUJBQ3BCQyxFQUFVTixFQUFLSyxLQUFLLGlCQUNwQkUsRUFBWVAsRUFBS0ssS0FBSyxrQkFFYixRQUFUSixJQUFrQk8sTUFBTVAsSUFBU0EsSUFBU1EsS0FBS0MsTUFBTVQsSUFBU0EsRUFBTyxLQUN6QyxJQUExQkssRUFBUUssUUFBUSxLQUNsQkMsU0FBU0MsU0FBU0MsS0FBT1IsRUFBVSxJQUFNQyxFQUFZLEtBQVFOLEVBQU8sR0FBS0csRUFFekVRLFNBQVNDLFNBQVNDLEtBQU9SLEVBQVFSLFFBQVEsU0FBVSxLQUFPLElBQU1TLEVBQVksS0FBUU4sRUFBTyxHQUFLRyxHQVN0RyxRQUFTVyxVQUFTQyxFQUFJckIsRUFBTXNCLEdBQzFCLFlBRUFDLFFBQU8sSUFBTUYsRUFBSywrQkFBK0JHLEtBQUssV0FDcEQsR0FBSUMsR0FBUUYsT0FBT0csS0FDZkQsR0FBTWYsS0FBSyxRQUFRaUIsT0FBTyxFQUFHM0IsRUFBSzRCLFVBQVk1QixHQUNoRHlCLEVBQU1JLEtBQUssVUFBV1AsS0FTNUIsUUFBU1EsY0FBYUMsRUFBR0MsR0FDdkIsWUFFS0QsS0FJQUMsSUFDSEQsRUFBSUEsRUFBRUUsWUFHSEYsRUFBRUcsVUFTTEgsRUFBRUksTUFBTXBDLE9BQVNnQyxFQUFFRyxTQUFX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T0FBTyxXQUNWNUMsWUFBWXVLLGlCQVdmdkssWUFBWTBMLGVBQWdCLEdBVjVCcEIsSUFDQXRLLFlBQVl1SyxrQkFBbUIsRUFDL0J2SyxZQUFZMEwsZUFBZ0IsRUFDNUJoSixXQUFXLFdBQ1QxQyxZQUFZdUssa0JBQW1CLEVBQzNCdkssWUFBWTBMLGVBQ2RwQixLQUVEIiwiZmlsZSI6ImZvcnVtX2ZuLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIHBocGJiICovXG5cbi8qKlxuICogcGhwQkIzIGZvcnVtIGZ1bmN0aW9uc1xuICovXG52YXIgc3R5bGVDb25maWcgPSB7XG4gIHN0YXRpY05hdmlnYXRpb246IHRydWUsXG4gIHN0YXRpY05hdmlnYXRpb25NaW5XaWR0aDogNzAwLFxuICBzdGF0aWNOYXZpZ2F0aW9uTWluSGVpZ2h0OiA0MDAsXG4gIGV4dGVuZFBvc3RlclByb2ZpbGU6IHRydWUsXG4gIGNvbGxhcHNlRm9ydW1zOiB0cnVlXG59O1xuXG4vKipcbiAqIEZpbmQgYSBtZW1iZXJcbiAqL1xuZnVuY3Rpb24gZmluZF91c2VybmFtZSh1cmwpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHBvcHVwKHVybCwgNzYwLCA1NzAsICdfdXNlcnNlYXJjaCcpO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogV2luZG93IHBvcHVwXG4gKi9cbmZ1bmN0aW9uIHBvcHVwKHVybCwgd2lkdGgsIGhlaWdodCwgbmFtZSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgaWYgKCFuYW1lKSB7XG4gICAgbmFtZSA9ICdfcG9wdXAnO1xuICB9XG5cbiAgd2luZG93Lm9wZW4odXJsLnJlcGxhY2UoLyZhbXA7L2csICcmJyksIG5hbWUsICdoZWlnaHQ9JyArIGhlaWdodCArICcscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPXllcywgd2lkdGg9JyArIHdpZHRoKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEp1bXAgdG8gcGFnZVxuICovXG5mdW5jdGlvbiBwYWdlSnVtcChpdGVtKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgcGFnZSA9IHBhcnNlSW50KGl0ZW0udmFsKCksIDEwKTtcbiAgdmFyIHBlclBhZ2UgPSBpdGVtLmF0dHIoJ2RhdGEtcGVyLXBhZ2UnKTtcbiAgdmFyIGJhc2VVcmwgPSBpdGVtLmF0dHIoJ2RhdGEtYmFzZS11cmwnKTtcbiAgdmFyIHN0YXJ0TmFtZSA9IGl0ZW0uYXR0cignZGF0YS1zdGFydC1uYW1lJyk7XG5cbiAgaWYgKHBhZ2UgIT09IG51bGwgJiYgIWlzTmFOKHBhZ2UpICYmIHBhZ2UgPT09IE1hdGguZmxvb3IocGFnZSkgJiYgcGFnZSA+IDApIHtcbiAgICBpZiAoYmFzZVVybC5pbmRleE9mKCc/JykgPT09IC0xKSB7XG4gICAgICBkb2N1bWVudC5sb2NhdGlvbi5ocmVmID0gYmFzZVVybCArICc/JyArIHN0YXJ0TmFtZSArICc9JyArICgocGFnZSAtIDEpICogcGVyUGFnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSBiYXNlVXJsLnJlcGxhY2UoLyZhbXA7L2csICcmJykgKyAnJicgKyBzdGFydE5hbWUgKyAnPScgKyAoKHBhZ2UgLSAxKSAqIHBlclBhZ2UpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIE1hcmsvdW5tYXJrIGNoZWNrbGlzdFxuICogaWQgPSBJRCBvZiBwYXJlbnQgY29udGFpbmVyLCBuYW1lID0gbmFtZSBwcmVmaXgsIHN0YXRlID0gc3RhdGUgW3RydWUvZmFsc2VdXG4gKi9cbmZ1bmN0aW9uIG1hcmtsaXN0KGlkLCBuYW1lLCBzdGF0ZSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgalF1ZXJ5KCcjJyArIGlkICsgJyBpbnB1dFt0eXBlPWNoZWNrYm94XVtuYW1lXScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHZhciAkdGhpcyA9IGpRdWVyeSh0aGlzKTtcbiAgICBpZiAoJHRoaXMuYXR0cignbmFtZScpLnN1YnN0cigwLCBuYW1lLmxlbmd0aCkgPT09IG5hbWUpIHtcbiAgICAgICR0aGlzLnByb3AoJ2NoZWNrZWQnLCBzdGF0ZSk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBSZXNpemUgdmlld2FibGUgYXJlYSBmb3IgYXR0YWNoZWQgaW1hZ2Ugb3IgdG9waWMgcmV2aWV3IHBhbmVsIChwb3NzaWJseSBvdGhlcnMgdG8gY29tZSlcbiAqIGUgPSBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIHZpZXdhYmxlQXJlYShlLCBpdHNlbGYpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGlmICghZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghaXRzZWxmKSB7XG4gICAgZSA9IGUucGFyZW50Tm9kZTtcbiAgfVxuXG4gIGlmICghZS52YUhlaWdodCkge1xuICAgIC8vIFN0b3JlIHZpZXdhYmxlIGFyZWEgaGVpZ2h0IGJlZm9yZSBjaGFuZ2luZyBzdHlsZSB0byBhdXRvXG4gICAgZS52YUhlaWdodCA9IGUub2Zmc2V0SGVpZ2h0O1xuICAgIGUudmFNYXhIZWlnaHQgPSBlLnN0eWxlLm1heEhlaWdodDtcbiAgICBlLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICBlLnN0eWxlLm1heEhlaWdodCA9ICdub25lJztcbiAgICBlLnN0eWxlLm92ZXJmbG93ID0gJ3Zpc2libGUnO1xuICB9IGVsc2Uge1xuICAgIC8vIFJlc3RvcmUgdmlld2FibGUgYXJlYSBoZWlnaHQgdG8gdGhlIGRlZmF1bHRcbiAgICBlLnN0eWxlLmhlaWdodCA9IGUudmFIZWlnaHQgKyAncHgnO1xuICAgIGUuc3R5bGUub3ZlcmZsb3cgPSAnYXV0byc7XG4gICAgZS5zdHlsZS5tYXhIZWlnaHQgPSBlLnZhTWF4SGVpZ2h0O1xuICAgIGUudmFIZWlnaHQgPSBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIEFsdGVybmF0ZSBkaXNwbGF5IG9mIHN1YlBhbmVsc1xuICovXG5qUXVlcnkoZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gICQoJy5zdWItcGFuZWxzJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRjaGlsZE5vZGVzID0gJCgnYVtkYXRhLXN1YnBhbmVsXScsIHRoaXMpLFxuICAgICAgcGFuZWxzID0gJGNoaWxkTm9kZXMubWFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXN1YnBhbmVsJyk7XG4gICAgICB9KSxcbiAgICAgIHNob3dQYW5lbCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXNob3ctcGFuZWwnKTtcblxuICAgIGlmIChwYW5lbHMubGVuZ3RoKSB7XG4gICAgICBhY3RpdmF0ZVN1YlBhbmVsKHNob3dQYW5lbCwgcGFuZWxzKTtcbiAgICAgICRjaGlsZE5vZGVzLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYWN0aXZhdGVTdWJQYW5lbCh0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1zdWJwYW5lbCcpLCBwYW5lbHMpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbi8qKlxuICogQWN0aXZhdGUgc3BlY2lmaWMgc3ViUGFuZWxcbiAqL1xuZnVuY3Rpb24gYWN0aXZhdGVTdWJQYW5lbChwLCBwYW5lbHMpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBpLCBzaG93UGFuZWw7XG5cbiAgaWYgKHR5cGVvZiBwID09PSAnc3RyaW5nJykge1xuICAgIHNob3dQYW5lbCA9IHA7XG4gIH1cbiAgJCgnaW5wdXRbbmFtZT1cInNob3dfcGFuZWxcIl0nKS52YWwoc2hvd1BhbmVsKTtcblxuICBpZiAodHlwZW9mIHBhbmVscyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBwYW5lbHMgPSBqUXVlcnkoJy5zdWItcGFuZWxzIGFbZGF0YS1zdWJwYW5lbF0nKS5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXN1YnBhbmVsJyk7XG4gICAgfSk7XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgcGFuZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgalF1ZXJ5KCcjJyArIHBhbmVsc1tpXSkuY3NzKCdkaXNwbGF5JywgcGFuZWxzW2ldID09PSBzaG93UGFuZWwgPyAnYmxvY2snIDogJ25vbmUnKTtcbiAgICBqUXVlcnkoJyMnICsgcGFuZWxzW2ldICsgJy10YWInKS50b2dnbGVDbGFzcygnYWN0aXZldGFiJywgcGFuZWxzW2ldID09PSBzaG93UGFuZWwpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNlbGVjdENvZGUoYSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gR2V0IElEIG9mIGNvZGUgYmxvY2tcbiAgdmFyIGUgPSBhLnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnQ09ERScpWzBdO1xuICB2YXIgcywgcjtcblxuICAvLyBOb3QgSUUgYW5kIElFOStcbiAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcbiAgICBzID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIC8vIFNhZmFyaSBhbmQgQ2hyb21lXG4gICAgaWYgKHMuc2V0QmFzZUFuZEV4dGVudCkge1xuICAgICAgdmFyIGwgPSAoZS5pbm5lclRleHQubGVuZ3RoID4gMSkgPyBlLmlubmVyVGV4dC5sZW5ndGggLSAxIDogMTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHMuc2V0QmFzZUFuZEV4dGVudChlLCAwLCBlLCBsKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgICByLnNlbGVjdE5vZGVDb250ZW50cyhlKTtcbiAgICAgICAgcy5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgcy5hZGRSYW5nZShyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gRmlyZWZveCBhbmQgT3BlcmFcbiAgICBlbHNlIHtcbiAgICAgIC8vIHdvcmthcm91bmQgZm9yIGJ1ZyAjIDQyODg1XG4gICAgICBpZiAod2luZG93Lm9wZXJhICYmIGUuaW5uZXJIVE1MLnN1YnN0cmluZyhlLmlubmVySFRNTC5sZW5ndGggLSA0KSA9PT0gJzxCUj4nKSB7XG4gICAgICAgIGUuaW5uZXJIVE1MID0gZS5pbm5lckhUTUwgKyAnJm5ic3A7JztcbiAgICAgIH1cblxuICAgICAgciA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICByLnNlbGVjdE5vZGVDb250ZW50cyhlKTtcbiAgICAgIHMucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICBzLmFkZFJhbmdlKHIpO1xuICAgIH1cbiAgICAvLyBTb21lIG9sZGVyIGJyb3dzZXJzXG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKSB7XG4gICAgcyA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpO1xuICAgIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIHIuc2VsZWN0Tm9kZUNvbnRlbnRzKGUpO1xuICAgIHMucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgcy5hZGRSYW5nZShyKTtcbiAgICAvLyBJRVxuICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xuICAgIHIgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO1xuICAgIHIubW92ZVRvRWxlbWVudFRleHQoZSk7XG4gICAgci5zZWxlY3QoKTtcbiAgfVxufVxuXG4vKipcbiAqIFBsYXkgcXVpY2t0aW1lIGZpbGUgYnkgZGV0ZXJtaW5pbmcgaXQncyB3aWR0aC9oZWlnaHRcbiAqIGZyb20gdGhlIGRpc3BsYXllZCByZWN0YW5nbGUgYXJlYVxuICovXG5mdW5jdGlvbiBwbGF5X3F0X2ZpbGUob2JqKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgcmVjdGFuZ2xlID0gb2JqLkdldFJlY3RhbmdsZSgpO1xuICB2YXIgd2lkdGgsIGhlaWdodDtcblxuICBpZiAocmVjdGFuZ2xlKSB7XG4gICAgcmVjdGFuZ2xlID0gcmVjdGFuZ2xlLnNwbGl0KCcsJyk7XG4gICAgdmFyIHgxID0gcGFyc2VJbnQocmVjdGFuZ2xlWzBdLCAxMCk7XG4gICAgdmFyIHgyID0gcGFyc2VJbnQocmVjdGFuZ2xlWzJdLCAxMCk7XG4gICAgdmFyIHkxID0gcGFyc2VJbnQocmVjdGFuZ2xlWzFdLCAxMCk7XG4gICAgdmFyIHkyID0gcGFyc2VJbnQocmVjdGFuZ2xlWzNdLCAxMCk7XG5cbiAgICB3aWR0aCA9ICh4MSA8IDApID8gKHgxICogLTEpICsgeDIgOiB4MiAtIHgxO1xuICAgIGhlaWdodCA9ICh5MSA8IDApID8gKHkxICogLTEpICsgeTIgOiB5MiAtIHkxO1xuICB9IGVsc2Uge1xuICAgIHdpZHRoID0gMjAwO1xuICAgIGhlaWdodCA9IDA7XG4gIH1cblxuICBvYmoud2lkdGggPSB3aWR0aDtcbiAgb2JqLmhlaWdodCA9IGhlaWdodCArIDE2O1xuXG4gIG9iai5TZXRDb250cm9sbGVyVmlzaWJsZSh0cnVlKTtcbiAgb2JqLlBsYXkoKTtcbn1cblxudmFyIGluQXV0b2NvbXBsZXRlID0gZmFsc2U7XG52YXIgbGFzdEtleUVudGVyZWQgPSAnJztcblxuLyoqXG4gKiBDaGVjayBldmVudCBrZXlcbiAqL1xuZnVuY3Rpb24gcGhwYmJDaGVja0tleShldmVudCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gS2V5Y29kZSBpcyBhcnJheSBkb3duIG9yIHVwP1xuICBpZiAoZXZlbnQua2V5Q29kZSAmJiAoZXZlbnQua2V5Q29kZSA9PT0gNDAgfHwgZXZlbnQua2V5Q29kZSA9PT0gMzgpKSB7XG4gICAgaW5BdXRvY29tcGxldGUgPSB0cnVlO1xuICB9XG5cbiAgLy8gTWFrZSBzdXJlIHdlIGFyZSBub3Qgd2l0aGluIGFuIFwiYXV0b2NvbXBsZXRpb25cIiBmaWVsZFxuICBpZiAoaW5BdXRvY29tcGxldGUpIHtcbiAgICAvLyBJZiByZXR1cm4gcHJlc3NlZCBhbmQga2V5IGNoYW5nZWQgd2UgcmVzZXQgdGhlIGF1dG9jb21wbGV0aW9uXG4gICAgaWYgKCFsYXN0S2V5RW50ZXJlZCB8fCBsYXN0S2V5RW50ZXJlZCA9PT0gZXZlbnQud2hpY2gpIHtcbiAgICAgIGluQXV0b2NvbXBsZXRlID0gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBLZXljb2RlIGlzIG5vdCByZXR1cm4sIHRoZW4gcmV0dXJuLiA7KVxuICBpZiAoZXZlbnQud2hpY2ggIT09IDEzKSB7XG4gICAgbGFzdEtleUVudGVyZWQgPSBldmVudC53aGljaDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBBcHBseSBvbmtleXByZXNzIGV2ZW50IGZvciBmb3JjaW5nIGRlZmF1bHQgc3VibWl0IGJ1dHRvbiBvbiBFTlRFUiBrZXkgcHJlc3NcbiAqL1xualF1ZXJ5KGZ1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAkKCdmb3JtIGlucHV0W3R5cGU9dGV4dF0sIGZvcm0gaW5wdXRbdHlwZT1wYXNzd29yZF0nKS5vbigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBkZWZhdWx0QnV0dG9uID0gJCh0aGlzKS5wYXJlbnRzKCdmb3JtJykuZmluZCgnaW5wdXRbdHlwZT1zdWJtaXRdLmRlZmF1bHQtc3VibWl0LWFjdGlvbicpO1xuXG4gICAgaWYgKCFkZWZhdWx0QnV0dG9uIHx8IGRlZmF1bHRCdXR0b24ubGVuZ3RoIDw9IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChwaHBiYkNoZWNrS2V5KGUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoKGUud2hpY2ggJiYgZS53aGljaCA9PT0gMTMpIHx8IChlLmtleUNvZGUgJiYgZS5rZXlDb2RlID09PSAxMykpIHtcbiAgICAgIGRlZmF1bHRCdXR0b24uY2xpY2soKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSk7XG59KTtcblxuLyoqXG4gKiBGdW5jdGlvbnMgZm9yIHVzZXIgc2VhcmNoIHBvcHVwXG4gKi9cbmZ1bmN0aW9uIGluc2VydFVzZXIoZm9ybUlkLCB2YWx1ZSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyICRmb3JtID0galF1ZXJ5KGZvcm1JZCksXG4gICAgZm9ybU5hbWUgPSAkZm9ybS5hdHRyKCdkYXRhLWZvcm0tbmFtZScpLFxuICAgIGZpZWxkTmFtZSA9ICRmb3JtLmF0dHIoJ2RhdGEtZmllbGQtbmFtZScpLFxuICAgIGl0ZW0gPSBvcGVuZXIuZG9jdW1lbnQuZm9ybXNbZm9ybU5hbWVdW2ZpZWxkTmFtZV07XG5cbiAgaWYgKGl0ZW0udmFsdWUubGVuZ3RoICYmIGl0ZW0udHlwZSA9PT0gJ3RleHRhcmVhJykge1xuICAgIHZhbHVlID0gaXRlbS52YWx1ZSArICdcXG4nICsgdmFsdWU7XG4gIH1cblxuICBpdGVtLnZhbHVlID0gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGluc2VydF9tYXJrZWRfdXNlcnMoZm9ybUlkLCB1c2Vycykge1xuICAndXNlIHN0cmljdCc7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB1c2Vycy5sZW5ndGg7IGkrKykge1xuICAgIGlmICh1c2Vyc1tpXS5jaGVja2VkKSB7XG4gICAgICBpbnNlcnRVc2VyKGZvcm1JZCwgdXNlcnNbaV0udmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHdpbmRvdy5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRfc2luZ2xlX3VzZXIoZm9ybUlkLCB1c2VyKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBpbnNlcnRVc2VyKGZvcm1JZCwgdXNlcik7XG4gIHdpbmRvdy5jbG9zZSgpO1xufVxuXG4vKipcbiAqIFJlc2l6ZSBwb3N0ZXIgcHJvZmlsZSBibG9ja1xuICovXG5mdW5jdGlvbiBhZGp1c3RQb3N0ZXJQcm9maWxlKHBvc3Rib2R5KSB7XG4gIHZhciBwcm9maWxlID0gcG9zdGJvZHkucGFyZW50KCkucHJldigpLFxuICAgIHBvc3QgPSBwcm9maWxlLnBhcmVudCgpLFxuICAgIHJlc2l6ZWQgPSBwcm9maWxlLmhhc0NsYXNzKCdyZXNpemVkJyk7XG5cbiAgZnVuY3Rpb24gdW5yZXNpemUoKSB7XG4gICAgcHJvZmlsZS5yZW1vdmVDbGFzcygncmVzaXplZCcpLmNzcygnbWluLWhlaWdodCcsICcnKTtcbiAgfVxuXG4gIGlmIChwb3N0LndpZHRoKCkgPCAocHJvZmlsZS53aWR0aCgpICsgcG9zdGJvZHkud2lkdGgoKSkpIHtcbiAgICBpZiAocmVzaXplZCkge1xuICAgICAgdW5yZXNpemUoKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKHJlc2l6ZWQpIHtcbiAgICBwcm9maWxlLmNzcygnbWluLWhlaWdodCcsICcnKTtcbiAgfVxuICBwcm9maWxlLmNzcygnbWluLWhlaWdodCcsIE1hdGguZmxvb3IocG9zdGJvZHkuaGVpZ2h0KCkpICsgJ3B4JykuYWRkQ2xhc3MoJ3Jlc2l6ZWQnKTtcbn1cblxuLyoqXG4gKiBSZXNwb25zaXZlIG5hdmlnYXRpb25cbiAqL1xuZnVuY3Rpb24gY2hlY2tOYXZpZ2F0aW9uKGZvcmNlKSB7XG4gIGZ1bmN0aW9uIGluaXQobmF2KSB7XG4gICAgbmF2LnJlc3BvbnNpdmUgPSBmYWxzZTtcbiAgICBuYXYubGFzdFdpZHRoID0gMDtcbiAgICBuYXYuaXRlbUNvdW50ID0gMDtcblxuICAgIC8vIENvcHkgY2hpbGRyZW4gaXRlbXNcbiAgICBuYXYuY29udGVudHMgPSBuYXYubWVudS5maW5kKCcuZHJvcGRvd24tY29udGVudHM6Zmlyc3QnKTtcbiAgICBuYXYuY2FuVG9nZ2xlID0gJCgpO1xuICAgIG5hdi5ub1RvZ2dsZSA9ICQoKTtcbiAgICBuYXYuY29udGVudHMuY2hpbGRyZW4oJy5zZXBhcmF0b3I6bGFzdC1jaGlsZCcpLmhpZGUoKTtcbiAgICBuYXYuaXRlbXMgPSBuYXYubGlzdHMuY2hpbGRyZW4oKS5ub3QobmF2Lm1lbnUpLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgIGNsb25lQ2xhc3M7XG5cbiAgICAgIGlmICgkdGhpcy5pcygnLm5vdC1yZXNwb25zaXZlLCAucmVzcG9uc2l2ZS1tZW51LCAuZHJvcGRvd24tY29udGFpbmVyLCAuc2VsZWN0ZWQnKSB8fCAkdGhpcy5hdHRyKCdkYXRhLXNraXAtcmVzcG9uc2l2ZScpID09ICd0cnVlJykge1xuICAgICAgICAkdGhpcy5hdHRyKCdkYXRhLXJlc3BvbnNpdmUtaW5kZXgnLCAtMSk7XG4gICAgICAgIG5hdi5ub1RvZ2dsZSA9IG5hdi5ub1RvZ2dsZS5hZGQoJHRoaXMpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNsb25lQ2xhc3MgPSAoXG4gICAgICAgICR0aGlzLmF0dHIoJ2RhdGEtcmVzcG9uc2l2ZS1jbGFzcycpID09PSB1bmRlZmluZWQgP1xuICAgICAgICAoJHRoaXMuaGFzQ2xhc3MoJ3NtYWxsLWljb24nKSA/ICR0aGlzLmF0dHIoJ2NsYXNzJykgOiAnJykgOlxuICAgICAgICAkdGhpcy5hdHRyKCdkYXRhLXJlc3BvbnNpdmUtY2xhc3MnKVxuICAgICAgKSArICcgcmVzcG9uc2l2ZS1pbmRleC0nICsgaTtcblxuICAgICAgbmF2LmNvbnRlbnRzLmFwcGVuZChcbiAgICAgICAgJHRoaXMuY2xvbmUodHJ1ZSkuYXR0cignY2xhc3MnLCBjbG9uZUNsYXNzKS5hZGRDbGFzcygncmVzcG9uc2l2ZS1jbG9uZScpLnJlbW92ZUNsYXNzKCd0YWInKVxuICAgICAgKTtcblxuICAgICAgJHRoaXMuYWRkQ2xhc3MoJ3Jlc3BvbnNpdmUtY2xvbmVkLWl0ZW0nKS5hdHRyKCdkYXRhLWNsb25lLWluZGV4JywgaSk7XG4gICAgICBuYXYuY2FuVG9nZ2xlID0gbmF2LmNhblRvZ2dsZS5hZGQoJHRoaXMpO1xuICAgICAgbmF2Lml0ZW1Db3VudCsrO1xuICAgIH0pO1xuICAgIG5hdi5jb250ZW50cy5maW5kKCdhLm5hdi1saW5rJykucmVtb3ZlQ2xhc3MoJ25hdi1saW5rJyk7XG4gICAgbmF2LnJlc3BvbnNpdmVDbG9uZXMgPSBuYXYuY29udGVudHMuY2hpbGRyZW4oJy5yZXNwb25zaXZlLWNsb25lJykuaGlkZSgpO1xuXG4gICAgbmF2LmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrKG5hdiwgZm9yY2UpIHtcbiAgICB2YXIgY29udGFpbmVyV2lkdGgsIHRvdGFsLCB3aWR0aCwgbWVudVdpZHRoLCBoaWRpbmc7XG5cbiAgICAvLyBTZXR1cCBuYXZpZ2F0aW9uXG4gICAgaWYgKCFuYXYuaW5pdGlhbGl6ZWQpIHtcbiAgICAgIGluaXQobmF2KTtcbiAgICAgIGZvcmNlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoIW5hdi5pdGVtQ291bnQpIHtcbiAgICAgIC8vIE5vdGhpbmcgdG8gaGlkZVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIHdpZHRoXG4gICAgY29udGFpbmVyV2lkdGggPSBuYXYuY29udGFpbmVyLndpZHRoKCk7XG4gICAgaWYgKCFmb3JjZSAmJiBjb250YWluZXJXaWR0aCA9PSBuYXYubGFzdFdpZHRoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIG5hdi5sYXN0V2lkdGggPSBjb250YWluZXJXaWR0aDtcblxuICAgIC8vIFNob3cgYWxsIGl0ZW1zXG4gICAgaWYgKG5hdi5yZXNwb25zaXZlKSB7XG4gICAgICBuYXYuY2FuVG9nZ2xlLnNob3coKTtcbiAgICAgIG5hdi5yZXNwb25zaXZlQ2xvbmVzLmhpZGUoKTtcbiAgICAgIG5hdi5tZW51LnJlbW92ZUNsYXNzKCdzaG93aW5nLXJlc3BvbnNpdmUtbWVudScpO1xuICAgICAgaWYgKCFuYXYuYWx3YXlzU2hvd01lbnUpIHtcbiAgICAgICAgbmF2Lm1lbnUuc2hvdygpO1xuICAgICAgfVxuICAgIH1cbiAgICBuYXYucmVzcG9uc2l2ZSA9IGZhbHNlO1xuICAgIG1lbnVXaWR0aCA9IG5hdi5tZW51Lm91dGVyV2lkdGgodHJ1ZSk7XG4gICAgd2lkdGggPSBtZW51V2lkdGg7XG5cbiAgICAvLyBDb3VudCB3aWR0aCBvZiBhbGwgaXRlbXMgdGhhdCBjYW5ub3QgYmUgaGlkZGVuXG4gICAgbmF2Lm5vVG9nZ2xlLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgIGlmICgkdGhpcy5pcygnOnZpc2libGUnKSkge1xuICAgICAgICB3aWR0aCArPSAkdGhpcy5vdXRlcldpZHRoKHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gVGVzdCBhbGwgb3RoZXIgaXRlbXNcbiAgICBoaWRpbmcgPSAod2lkdGggPj0gY29udGFpbmVyV2lkdGgpO1xuICAgIG5hdi5jYW5Ub2dnbGUuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgICBpdGVtV2lkdGgsIG1hcmdpbjtcblxuICAgICAgaWYgKCEkdGhpcy5pcygnOnZpc2libGUnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghaGlkaW5nKSB7XG4gICAgICAgIGl0ZW1XaWR0aCA9ICR0aGlzLm91dGVyV2lkdGgodHJ1ZSk7XG4gICAgICAgIGlmICghaXRlbVdpZHRoKSB7XG4gICAgICAgICAgJHRoaXMuaGlkZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHdpZHRoICs9IGl0ZW1XaWR0aDtcbiAgICAgICAgaWYgKHdpZHRoID49IGNvbnRhaW5lcldpZHRoKSB7XG4gICAgICAgICAgaGlkaW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaGlkaW5nKSB7XG4gICAgICAgICR0aGlzLmhpZGUoKTtcbiAgICAgICAgbmF2LnJlc3BvbnNpdmVDbG9uZXMuZmlsdGVyKCcucmVzcG9uc2l2ZS1pbmRleC0nICsgJHRoaXMuYXR0cignZGF0YS1jbG9uZS1pbmRleCcpKS5zaG93KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBuYXYucmVzcG9uc2l2ZSA9IGhpZGluZztcbiAgICBpZiAoIWhpZGluZyAmJiAhbmF2LmFsd2F5c1Nob3dNZW51KSB7XG4gICAgICBuYXYubWVudS5oaWRlKCk7XG4gICAgfSBlbHNlIGlmIChoaWRpbmcpIHtcbiAgICAgIG5hdi5tZW51LmFkZENsYXNzKCdzaG93aW5nLXJlc3BvbnNpdmUtbWVudScpO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVDb25maWcuX3Jlc3BvbnNpdmVOYXZpZ2F0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgY2hlY2soc3R5bGVDb25maWcuX3Jlc3BvbnNpdmVOYXZpZ2F0aW9uW2ldLCBmb3JjZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdFJlc3BvbnNpdmVOYXZpZ2F0aW9uKCkge1xuICBzdHlsZUNvbmZpZy5fcmVzcG9uc2l2ZU5hdmlnYXRpb24gPSBbXTtcblxuICAkKCcubmF2LXRhYnMsIC5uYXZiYXIuc2Vjb25kYXJ5JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgIGxpc3RzID0gJHRoaXMuY2hpbGRyZW4oJ3VsJyksXG4gICAgICBtZW51ID0gbGlzdHMuY2hpbGRyZW4oJy5yZXNwb25zaXZlLW1lbnU6Zmlyc3QnKSxcbiAgICAgIGFsd2F5c1Nob3dNZW51ID0gKG1lbnUubGVuZ3RoID4gMCk7XG5cbiAgICAvLyBDcmVhdGUgZW1wdHkgaGlkZGVuIG1lbnVcbiAgICBpZiAoIW1lbnUubGVuZ3RoKSB7XG4gICAgICBpZiAoJHRoaXMuaXMoJy5uYXYtdGFicycpKSB7XG4gICAgICAgIC8vIFNvbWV0aGluZyB3ZW50IHdyb25nIC0gbWFpbiBtZW51IG11c3QgaGF2ZSByZXNwb25zaXZlIG1lbnVcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gU2Vjb25kYXJ5IG1lbnVcbiAgICAgIGxpc3RzLmVxKDApLnByZXBlbmQoJzxsaSBjbGFzcz1cInJlc3BvbnNpdmUtbWVudSBkcm9wZG93bi1jb250YWluZXJcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PGEgaHJlZj1cIiNcIiBjbGFzcz1cImRyb3Bkb3duLXRyaWdnZXIgZHJvcGRvd24tdG9nZ2xlXCI+PGkgY2xhc3M9XCJtZGkgbWRpLW1lbnVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2E+JyArXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiZHJvcGRvd24gaGlkZGVuXCI+JyArXG4gICAgICAgICc8ZGl2IGNsYXNzPVwicG9pbnRlclwiPjxkaXYgY2xhc3M9XCJwb2ludGVyLWlubmVyXCI+PC9kaXY+PC9kaXY+JyArXG4gICAgICAgICc8dWwgY2xhc3M9XCJkcm9wZG93bi1jb250ZW50c1wiIC8+PC91bD4nICtcbiAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAnPC9saT4nKTtcbiAgICAgIG1lbnUgPSBsaXN0cy5jaGlsZHJlbignLnJlc3BvbnNpdmUtbWVudTpmaXJzdCcpO1xuICAgICAgcGhwYmIucmVnaXN0ZXJEcm9wZG93bihtZW51LmZpbmQoJy5kcm9wZG93bi10b2dnbGUnKSwgbWVudS5maW5kKCcuZHJvcGRvd24nKSk7XG4gICAgfVxuXG4gICAgc3R5bGVDb25maWcuX3Jlc3BvbnNpdmVOYXZpZ2F0aW9uLnB1c2goe1xuICAgICAgY29udGFpbmVyOiAkdGhpcyxcbiAgICAgIGxpc3RzOiBsaXN0cyxcbiAgICAgIG1lbnU6IG1lbnUsXG4gICAgICBpbml0aWFsaXplZDogZmFsc2UsXG4gICAgICBhbHdheXNTaG93TWVudTogYWx3YXlzU2hvd01lbnVcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICogUGFyc2UgZG9jdW1lbnQgYmxvY2tcbiAqL1xuZnVuY3Rpb24gcGFyc2VEb2N1bWVudCgkY29udGFpbmVyKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgdGVzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgIG9sZEJyb3dzZXIgPSAodHlwZW9mIHRlc3Quc3R5bGUuYm9yZGVyUmFkaXVzID09PSAndW5kZWZpbmVkJyksXG4gICAgJGJvZHkgPSAkKCdib2R5Jyk7XG5cbiAgLyoqXG4gICAqIEFkanVzdCBuYXZpZ2F0aW9uIHRhYnNcbiAgICovXG4gICRjb250YWluZXIuZmluZCgnLm5hdi10YWJzJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRhYnMgPSAkKHRoaXMpLmNoaWxkcmVuKCkuY2hpbGRyZW4oKTtcblxuICAgIC8vIEZpeCB0YWJzIHN0cnVjdHVyZVxuICAgIHRhYnMubm90KCcudGFiJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdGFiID0gJCh0aGlzKSxcbiAgICAgICAgY2xhc3NOYW1lID0gdGFiLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKSxcbiAgICAgICAgaTtcbiAgICAgIHRhYi5hdHRyKCdjbGFzcycsICd0YWInKTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBjbGFzc05hbWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGNsYXNzTmFtZVtpXS5zdWJzdHIoMCwgNSkgPT0gJ2ljb24tJykge1xuICAgICAgICAgIHRhYi5hZGRDbGFzcyhjbGFzc05hbWVbaV0uc3Vic3RyKDUpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLmNoaWxkcmVuKCc6Zmlyc3QtY2hpbGQnKS5hZGRDbGFzcygnbmF2LWxpbmsnKTtcblxuICAgIC8vIFRvb2x0aXBzIGZvciB0YWJzXG4gICAgdGFicy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgIHRpdGxlID0gJyc7XG4gICAgICBpZiAoISR0aGlzLmF0dHIoJ3RpdGxlJykpIHtcbiAgICAgICAgdGl0bGUgPSAkdGhpcy5jaGlsZHJlbignLm5hdi1saW5rJykudGV4dCgpLnRyaW0oKTtcbiAgICAgICAgaWYgKCF0aXRsZS5sZW5ndGgpIHJldHVybjtcblxuICAgICAgICAkdGhpcy5jaGlsZHJlbignLm5hdi1saW5rICsgc3Ryb25nJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGl0bGUgKz0gJyAoJyArICQodGhpcykudGV4dCgpLnRyaW0oKSArICcpJztcbiAgICAgICAgfSk7XG4gICAgICAgICR0aGlzLmF0dHIoJ3RpdGxlJywgdGl0bGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvKipcbiAgICogU3dpdGNoIHNlbGVjdGVkIHRhYlxuICAgKi9cbiAgJGNvbnRhaW5lci5maW5kKCcubmF2LXRhYnNbZGF0YS1jdXJyZW50LXBhZ2VdJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRhYnMgPSAkKHRoaXMpLFxuICAgICAgY3VycmVudCA9IHRhYnMuYXR0cignZGF0YS1jdXJyZW50LXBhZ2UnKSxcbiAgICAgIGZvdW5kID0gZmFsc2UsXG4gICAgICBjb250ZW50LCBjbGFzc2VzLCBpLCBrZXk7XG5cbiAgICAkKCcudGFiW2RhdGEtc2VsZWN0LW1hdGNoXScsIHRoaXMpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG1hdGNoZXMgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtc2VsZWN0LW1hdGNoJykuc3BsaXQoJywnKSxcbiAgICAgICAgaSwgbWF0Y2gsIGl0ZW07XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBtYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1hdGNoID0gbWF0Y2hlc1tpXS50cmltKCk7XG4gICAgICAgIGlmIChjdXJyZW50LmluZGV4T2YobWF0Y2gpICE9IC0xKSB7XG4gICAgICAgICAgLy8gRm91bmQgYSBtYXRjaCFcbiAgICAgICAgICBpdGVtID0gJCh0aGlzKTtcbiAgICAgICAgICBpZiAoIWl0ZW0uaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIHRhYnMuZmluZCgnLnRhYi5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgaXRlbS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGtub3duIGV4dGVuc2lvbnNcbiAgICBpZiAoZm91bmQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb250ZW50ID0gJGNvbnRhaW5lci5maW5kKCcuY29udGVudC5wYWdlcy1jb250ZW50Jyk7XG4gICAgaWYgKGNvbnRlbnQubGVuZ3RoKSB7XG4gICAgICAvLyBHZXQgcGFnZSBjb250ZW50IGNsYXNzLCB0cnkgdG8gZmluZCBtYXRjaGluZyBsaW5rXG4gICAgICBjbGFzc2VzID0gY29udGVudC5wcm9wKCdjbGFzcycpLnNwbGl0KCcgJyk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgY2xhc3Nlcy5sZW5ndGggJiYgIWZvdW5kOyBpKyspIHtcbiAgICAgICAga2V5ID0gY2xhc3Nlc1tpXS50cmltKCk7XG4gICAgICAgIGlmIChrZXkgIT09ICdjb250ZW50JyAmJiBrZXkgIT09ICdwYWdlcy1jb250ZW50Jykge1xuICAgICAgICAgICRjb250YWluZXIuZmluZCgnLnRhYi5wYWdlcy4nICsga2V5KS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRhYnMuZmluZCgnLnRhYi5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IGZpcnN0IHBhZ2UgbGlua1xuICAgICAgJGNvbnRhaW5lci5maW5kKCcudGFiLnBhZ2VzOmZpcnN0JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRhYnMuZmluZCgnLnRhYi5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBSZXNldCBhdmF0YXIgZGltZW5zaW9ucyB3aGVuIGNoYW5naW5nIFVSTCBvciBFTUFJTFxuICAgKi9cbiAgJGNvbnRhaW5lci5maW5kKCdpbnB1dFtkYXRhLXJlc2V0LW9uLWVkaXRdJykub24oJ2tleXVwJywgZnVuY3Rpb24gKCkge1xuICAgICQodGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmVzZXQtb24tZWRpdCcpKS52YWwoJycpO1xuICB9KTtcblxuICAvKipcbiAgICogUGFnaW5hdGlvblxuICAgKi9cbiAgJGNvbnRhaW5lci5maW5kKCcucGFnaW5hdGlvbiAucGFnZS1qdW1wLWZvcm0gOmJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJGlucHV0ID0gJCh0aGlzKS5zaWJsaW5ncygnaW5wdXQuaW5wdXRib3gnKTtcbiAgICBwYWdlSnVtcCgkaW5wdXQpO1xuICB9KTtcblxuICAkY29udGFpbmVyLmZpbmQoJy5wYWdpbmF0aW9uIC5wYWdlLWp1bXAtZm9ybSBpbnB1dC5pbnB1dGJveCcpLm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChldmVudC53aGljaCA9PT0gMTMgfHwgZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBwYWdlSnVtcCgkKHRoaXMpKTtcbiAgICB9XG4gIH0pO1xuXG4gICRjb250YWluZXIuZmluZCgnLnBhZ2luYXRpb24gLmRyb3Bkb3duLXRyaWdnZXInKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRkcm9wZG93bkNvbnRhaW5lciA9ICQodGhpcykucGFyZW50KCk7XG4gICAgLy8gV2FpdCBhIGxpdHRsZSBiaXQgdG8gbWFrZSBzdXJlIHRoZSBkcm9wZG93biBoYXMgYWN0aXZhdGVkXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoJGRyb3Bkb3duQ29udGFpbmVyLmhhc0NsYXNzKCdkcm9wZG93bi12aXNpYmxlJykpIHtcbiAgICAgICAgJGRyb3Bkb3duQ29udGFpbmVyLmZpbmQoJ2lucHV0LmlucHV0Ym94JykuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9LCAxMDApO1xuICB9KTtcblxuICAvKipcbiAgICogQWRqdXN0IEhUTUwgY29kZSBmb3IgSUU4IGFuZCBvbGRlciB2ZXJzaW9uc1xuICAgKi9cbiAgLy8gaWYgKG9sZEJyb3dzZXIpIHtcbiAgLy8gXHQvLyBGaXggLmxpbmtsaXN0LmJ1bGxldGluIGxpc3RzXG4gIC8vIFx0JGNvbnRhaW5lclxuICAvLyBcdFx0LmZpbmQoJ3VsLmxpbmtsaXN0LmJ1bGxldGluID4gbGknKVxuICAvLyBcdFx0LmZpbHRlcignOmZpcnN0LWNoaWxkLCAucmlnaHRzaWRlOmxhc3QtY2hpbGQnKVxuICAvLyBcdFx0LmFkZENsYXNzKCduby1idWxsZXRpbicpO1xuICAvLyB9XG5cbiAgLyoqXG4gICAqIFJlc2l6ZSBuYXZpZ2F0aW9uIChicmVhZGNydW1icykgYmxvY2sgdG8ga2VlcCBhbGwgbGlua3Mgb24gc2FtZSBsaW5lXG4gICAqL1xuICAkY29udGFpbmVyLmZpbmQoJy5uYXZsaW5rcycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAkbGVmdCA9ICR0aGlzLmNoaWxkcmVuKCkubm90KCcucmlnaHRzaWRlJyksXG4gICAgICAkcmlnaHQgPSAkdGhpcy5jaGlsZHJlbignLnJpZ2h0c2lkZScpLFxuICAgICAgcXVldWVkID0gZmFsc2UsXG4gICAgICB0aHJvdHRsZWQgPSBmYWxzZTtcblxuICAgIGlmICgkbGVmdC5sZW5ndGggIT09IDEgfHwgISRyaWdodC5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNpemUoKSB7XG4gICAgICB2YXIgd2lkdGggPSAwLFxuICAgICAgICBkaWZmID0gJGxlZnQub3V0ZXJXaWR0aCh0cnVlKSAtICRsZWZ0LndpZHRoKCksXG4gICAgICAgIG1pbldpZHRoID0gTWF0aC5tYXgoJHRoaXMud2lkdGgoKSAvIDMsIDI0MCksXG4gICAgICAgIG1heFdpZHRoO1xuXG4gICAgICB0aHJvdHRsZWQgPSBmYWxzZTtcbiAgICAgICRyaWdodC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgaWYgKCR0aGlzLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICAgd2lkdGggKz0gJHRoaXMub3V0ZXJXaWR0aCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIG1heFdpZHRoID0gJHRoaXMud2lkdGgoKSAtIHdpZHRoIC0gZGlmZjtcbiAgICAgICRsZWZ0LmNzcygnbWF4LXdpZHRoJywgTWF0aC5mbG9vcihNYXRoLm1heChtYXhXaWR0aCwgbWluV2lkdGgpKSArICdweCcpO1xuICAgIH1cblxuICAgIHJlc2l6ZSgpO1xuICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRocm90dGxlZCkge1xuICAgICAgICBxdWV1ZWQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzaXplKCk7XG4gICAgICAgIHRocm90dGxlZCA9IHRydWU7XG4gICAgICAgIHF1ZXVlZCA9IGZhbHNlO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aHJvdHRsZWQgPSBmYWxzZTtcbiAgICAgICAgICBpZiAocXVldWVkKSB7XG4gICAgICAgICAgICByZXNpemUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDI1MCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBNYWtlcyBicmVhZGNydW1icyByZXNwb25zaXZlXG4gICAqL1xuICAkY29udGFpbmVyLmZpbmQoJy5icmVhZGNydW1iczpub3QoW2RhdGEtc2tpcC1yZXNwb25zaXZlXSknKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgJGxpbmtzID0gJHRoaXMuZmluZCgnLmNydW1iJyksXG4gICAgICBsZW5ndGggPSAkbGlua3MubGVuZ3RoLFxuICAgICAgY2xhc3NlcyA9IFsnd3JhcHBlZC1tYXgnLCAnd3JhcHBlZC13aWRlJywgJ3dyYXBwZWQtbWVkaXVtJywgJ3dyYXBwZWQtc21hbGwnLCAnd3JhcHBlZC10aW55J10sXG4gICAgICBjbGFzc2VzTGVuZ3RoID0gY2xhc3Nlcy5sZW5ndGgsXG4gICAgICBtYXhIZWlnaHQgPSAwLFxuICAgICAgbGFzdFdpZHRoID0gZmFsc2UsXG4gICAgICB3cmFwcGVkID0gZmFsc2UsXG4gICAgICBxdWV1ZWQgPSBmYWxzZSxcbiAgICAgIHRocm90dGxlZCA9IGZhbHNlO1xuXG4gICAgLy8gU2V0IHRvb2x0aXBzXG4gICAgJHRoaXMuZmluZCgnYScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICRsaW5rID0gJCh0aGlzKTtcbiAgICAgICRsaW5rLmF0dHIoJ3RpdGxlJywgJGxpbmsudGV4dCgpKTtcbiAgICB9KTtcblxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgY2hlY2tzIGJyZWFkY3J1bWJzXG4gICAgZnVuY3Rpb24gY2hlY2soKSB7XG4gICAgICB2YXIgaGVpZ2h0ID0gJHRoaXMuaGVpZ2h0KCksXG4gICAgICAgIHdpZHRoO1xuXG4gICAgICAvLyBUZXN0IG1heC13aWR0aCBzZXQgaW4gY29kZSBmb3IgLm5hdmxpbmtzIGFib3ZlXG4gICAgICB3aWR0aCA9IHBhcnNlSW50KCR0aGlzLmNzcygnbWF4LXdpZHRoJyksIDEwKTtcbiAgICAgIGlmICghd2lkdGgpIHtcbiAgICAgICAgd2lkdGggPSAkYm9keS53aWR0aCgpO1xuICAgICAgfVxuXG4gICAgICB0aHJvdHRsZWQgPSBmYWxzZTtcbiAgICAgIG1heEhlaWdodCA9IHBhcnNlSW50KCR0aGlzLmNzcygnbGluZS1oZWlnaHQnKSwgMTApO1xuICAgICAgJGxpbmtzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS5oZWlnaHQoKSA+IDApIHtcbiAgICAgICAgICBtYXhIZWlnaHQgPSBNYXRoLm1heChtYXhIZWlnaHQsICQodGhpcykub3V0ZXJIZWlnaHQodHJ1ZSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGhlaWdodCA8PSBtYXhIZWlnaHQpIHtcbiAgICAgICAgaWYgKCF3cmFwcGVkIHx8IGxhc3RXaWR0aCA9PT0gZmFsc2UgfHwgbGFzdFdpZHRoID49IHdpZHRoKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsYXN0V2lkdGggPSB3aWR0aDtcblxuICAgICAgaWYgKHdyYXBwZWQpIHtcbiAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ3dyYXBwZWQnKS5maW5kKCcuY3J1bWIud3JhcHBlZCcpLnJlbW92ZUNsYXNzKCd3cmFwcGVkICcgKyBjbGFzc2VzLmpvaW4oJyAnKSk7XG4gICAgICAgIGlmICgkdGhpcy5oZWlnaHQoKSA8PSBtYXhIZWlnaHQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgd3JhcHBlZCA9IHRydWU7XG4gICAgICAkdGhpcy5hZGRDbGFzcygnd3JhcHBlZCcpO1xuICAgICAgaWYgKCR0aGlzLmhlaWdodCgpIDw9IG1heEhlaWdodCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xhc3Nlc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAodmFyIGogPSBsZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICAgICRsaW5rcy5lcShqKS5hZGRDbGFzcygnd3JhcHBlZCAnICsgY2xhc3Nlc1tpXSk7XG4gICAgICAgICAgaWYgKCR0aGlzLmhlaWdodCgpIDw9IG1heEhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJ1biBmdW5jdGlvbiBhbmQgc2V0IGV2ZW50XG4gICAgY2hlY2soKTtcbiAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aHJvdHRsZWQpIHtcbiAgICAgICAgcXVldWVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoZWNrKCk7XG4gICAgICAgIHRocm90dGxlZCA9IHRydWU7XG4gICAgICAgIHF1ZXVlZCA9IGZhbHNlO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aHJvdHRsZWQgPSBmYWxzZTtcbiAgICAgICAgICBpZiAocXVldWVkKSB7XG4gICAgICAgICAgICBjaGVjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgMjUwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIFJlc3BvbnNpdmUgbGluayBsaXN0c1xuICAgKi9cbiAgdmFyIHNlbGVjdG9yID0gJy5saW5rbGlzdDpub3QoLm5hdmxpbmtzLCBbZGF0YS1za2lwLXJlc3BvbnNpdmVdKSwnICtcbiAgICAnLnBvc3Rib2R5IC5wb3N0LWJ1dHRvbnM6bm90KFtkYXRhLXNraXAtcmVzcG9uc2l2ZV0pJztcbiAgJGNvbnRhaW5lci5maW5kKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgZmlsdGVyU2tpcCA9ICcuYnJlYWRjcnVtYnMsIFtkYXRhLXNraXAtcmVzcG9uc2l2ZV0nLFxuICAgICAgZmlsdGVyTGFzdCA9ICcuZWRpdC1pY29uLCAucXVvdGUtaWNvbiwgW2RhdGEtbGFzdC1yZXNwb25zaXZlXScsXG4gICAgICAkbGlua3NBbGwgPSAkdGhpcy5jaGlsZHJlbigpLFxuICAgICAgJGxpbmtzTm90U2tpcCA9ICRsaW5rc0FsbC5ub3QoZmlsdGVyU2tpcCksIC8vIEFsbCBpdGVtcyB0aGF0IGNhbiBwb3RlbnRpYWxseSBiZSBoaWRkZW5cbiAgICAgICRsaW5rc0ZpcnN0ID0gJGxpbmtzTm90U2tpcC5ub3QoZmlsdGVyTGFzdCksIC8vIFRoZSBpdGVtcyB0aGF0IHdpbGwgYmUgaGlkZGVuIGZpcnN0XG4gICAgICAkbGlua3NMYXN0ID0gJGxpbmtzTm90U2tpcC5maWx0ZXIoZmlsdGVyTGFzdCksIC8vIFRoZSBpdGVtcyB0aGF0IHdpbGwgYmUgaGlkZGVuIGxhc3RcbiAgICAgIHBlcnNpc3RlbnQgPSAkdGhpcy5hdHRyKCdpZCcpID09PSAnbmF2LW1haW4nLCAvLyBEb2VzIHRoaXMgbGlzdCBhbHJlYWR5IGhhdmUgYSBtZW51IChzdWNoIGFzIHF1aWNrLWxpbmtzKT9cbiAgICAgIGh0bWwgPSAnPGxpIGNsYXNzPVwicmVzcG9uc2l2ZS1tZW51IGhpZGRlblwiPjxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJyZXNwb25zaXZlLW1lbnUtbGlua1wiPjwvYT48ZGl2IGNsYXNzPVwiZHJvcGRvd24gaGlkZGVuXCI+PGRpdiBjbGFzcz1cInBvaW50ZXJcIj48ZGl2IGNsYXNzPVwicG9pbnRlci1pbm5lclwiIC8+PC9kaXY+PHVsIGNsYXNzPVwiZHJvcGRvd24tY29udGVudHNcIiAvPjwvZGl2PjwvbGk+JyxcbiAgICAgIHNsYWNrID0gMzsgLy8gVmVydGljYWwgc2xhY2sgc3BhY2UgKGluIHBpeGVscykuIERldGVybWluZXMgaG93IHNlbnNpdGl2ZSB0aGUgc2NyaXB0IGlzIGluIGRldGVybWluaW5nIHdoZXRoZXIgYSBsaW5lLWJyZWFrIGhhcyBvY2N1cmVkLlxuXG4gICAgLy8gQWRkIGEgaGlkZGVuIGRyb3AtZG93biBtZW51IHRvIGVhY2ggbGlua3MgbGlzdCAoZXhjZXB0IHRob3NlIHRoYXQgYWxyZWFkeSBoYXZlIG9uZSlcbiAgICBpZiAoIXBlcnNpc3RlbnQpIHtcbiAgICAgIGlmICgkbGlua3NOb3RTa2lwLmlzKCcucmlnaHRzaWRlJykpIHtcbiAgICAgICAgJGxpbmtzTm90U2tpcC5maWx0ZXIoJy5yaWdodHNpZGU6Zmlyc3QnKS5iZWZvcmUoaHRtbCk7XG4gICAgICAgICR0aGlzLmNoaWxkcmVuKCcucmVzcG9uc2l2ZS1tZW51JykuYWRkQ2xhc3MoJ3JpZ2h0c2lkZScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHRoaXMuYXBwZW5kKGh0bWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCBzb21lIG9iamVjdCByZWZlcmVuY2VzIGFuZCBpbml0aWFsIHN0YXRlc1xuICAgIHZhciAkbWVudSA9ICR0aGlzLmNoaWxkcmVuKCcucmVzcG9uc2l2ZS1tZW51JyksXG4gICAgICAkbWVudUNvbnRlbnRzID0gJG1lbnUuZmluZCgnLmRyb3Bkb3duLWNvbnRlbnRzJyksXG4gICAgICBwZXJzaXN0ZW50Q29udGVudCA9ICRtZW51Q29udGVudHMuZmluZCgnbGk6bm90KC5zZXBhcmF0b3IpJykubGVuZ3RoLFxuICAgICAgbGFzdFdpZHRoID0gZmFsc2UsXG4gICAgICBjb21wYWN0ID0gZmFsc2UsXG4gICAgICByZXNwb25zaXZlMSA9IGZhbHNlLFxuICAgICAgcmVzcG9uc2l2ZTIgPSBmYWxzZSxcbiAgICAgIGNvcGllZDEgPSBmYWxzZSxcbiAgICAgIGNvcGllZDIgPSBmYWxzZSxcbiAgICAgIG1heEhlaWdodCA9IDA7XG5cbiAgICAvLyBGaW5kIHRoZSB0YWxsZXN0IGVsZW1lbnQgaW4gdGhlIGxpc3QgKHdlIGFzc3VtZSB0aGF0IGFsbCBlbGVtZW50cyBhcmUgcm91Z2hseSB0aGUgc2FtZSBoZWlnaHQpXG4gICAgJGxpbmtzQWxsLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCEkKHRoaXMpLmhlaWdodCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIG1heEhlaWdodCA9IE1hdGgubWF4KG1heEhlaWdodCwgJCh0aGlzKS5vdXRlckhlaWdodCh0cnVlKSk7XG4gICAgfSk7XG4gICAgaWYgKG1heEhlaWdodCA8IDEpIHtcbiAgICAgIHJldHVybjsgLy8gU2hvdWxkbid0IGJlIHBvc3NpYmxlLCBidXQganVzdCBpbiBjYXNlLCBhYm9ydFxuICAgIH1cbiAgICBtYXhIZWlnaHQgPSBtYXhIZWlnaHQgKyBzbGFjaztcblxuXG4gICAgZnVuY3Rpb24gY2hlY2soKSB7XG4gICAgICB2YXIgd2lkdGggPSAkYm9keS53aWR0aCgpO1xuICAgICAgLy8gV2UgY2FuJ3QgbWFrZSBpdCBhbnkgc21hbGxlciB0aGFuIHRoaXMsIHNvIGp1c3Qgc2tpcFxuICAgICAgaWYgKHJlc3BvbnNpdmUyICYmIGNvbXBhY3QgJiYgKHdpZHRoIDw9IGxhc3RXaWR0aCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbGFzdFdpZHRoID0gd2lkdGg7XG5cbiAgICAgIC8vIFJlc2V0IHJlc3BvbnNpdmUgYW5kIGNvbXBhY3QgbGF5b3V0XG4gICAgICBpZiAocmVzcG9uc2l2ZTEgfHwgcmVzcG9uc2l2ZTIpIHtcbiAgICAgICAgJGxpbmtzTm90U2tpcC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICRtZW51Q29udGVudHMuY2hpbGRyZW4oJy5jbG9uZScpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgcmVzcG9uc2l2ZTEgPSByZXNwb25zaXZlMiA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGNvbXBhY3QpIHtcbiAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2NvbXBhY3QnKTtcbiAgICAgICAgY29tcGFjdCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBVbmhpZGUgdGhlIHF1aWNrLWxpbmtzIG1lbnUgaWYgaXQgaGFzIFwicGVyc2lzdGVudFwiIGNvbnRlbnRcbiAgICAgIGlmIChwZXJzaXN0ZW50ICYmIHBlcnNpc3RlbnRDb250ZW50KSB7XG4gICAgICAgICRtZW51LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRtZW51LmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cblxuICAgICAgLy8gTm90aGluZyB0byByZXNpemUgaWYgYmxvY2sncyBoZWlnaHQgaXMgbm90IGJpZ2dlciB0aGFuIHRhbGxlc3QgZWxlbWVudCdzIGhlaWdodFxuICAgICAgaWYgKCR0aGlzLmhlaWdodCgpIDw9IG1heEhlaWdodCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFNURVAgMTogQ29tcGFjdFxuICAgICAgaWYgKCFjb21wYWN0KSB7XG4gICAgICAgICR0aGlzLmFkZENsYXNzKCdjb21wYWN0Jyk7XG4gICAgICAgIGNvbXBhY3QgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKCR0aGlzLmhlaWdodCgpIDw9IG1heEhlaWdodCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFNURVAgMjogRmlyc3QgcmVzcG9uc2l2ZSBzZXQgLSBjb21wYWN0XG4gICAgICBpZiAoY29tcGFjdCkge1xuICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnY29tcGFjdCcpO1xuICAgICAgICBjb21wYWN0ID0gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBDb3B5IHRoZSBsaXN0IGl0ZW1zIHRvIHRoZSBkcm9wZG93blxuICAgICAgaWYgKCFjb3BpZWQxKSB7XG4gICAgICAgIHZhciAkY2xvbmVzMSA9ICRsaW5rc0ZpcnN0LmNsb25lKCk7XG4gICAgICAgICRtZW51Q29udGVudHMucHJlcGVuZCgkY2xvbmVzMS5hZGRDbGFzcygnY2xvbmUgY2xvbmUtZmlyc3QnKS5yZW1vdmVDbGFzcygnbGVmdHNpZGUgcmlnaHRzaWRlJykpO1xuXG4gICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygncG9zdC1idXR0b25zJykpIHtcbiAgICAgICAgICAkKCcuYnV0dG9uJywgJG1lbnVDb250ZW50cykucmVtb3ZlQ2xhc3MoJ2J1dHRvbiBpY29uLWJ1dHRvbicpO1xuICAgICAgICAgICQoJy5yZXNwb25zaXZlLW1lbnUtbGluaycsICRtZW51KS5hZGRDbGFzcygnYnV0dG9uIGljb24tYnV0dG9uJykucHJlcGVuZCgnPHNwYW4+PC9zcGFuPicpO1xuICAgICAgICB9XG4gICAgICAgIGNvcGllZDEgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKCFyZXNwb25zaXZlMSkge1xuICAgICAgICAkbGlua3NGaXJzdC5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIHJlc3BvbnNpdmUxID0gdHJ1ZTtcbiAgICAgICAgJG1lbnVDb250ZW50cy5jaGlsZHJlbignLmNsb25lLWZpcnN0JykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAkbWVudS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICBpZiAoJHRoaXMuaGVpZ2h0KCkgPD0gbWF4SGVpZ2h0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gU1RFUCAzOiBGaXJzdCByZXNwb25zaXZlIHNldCArIGNvbXBhY3RcbiAgICAgIGlmICghY29tcGFjdCkge1xuICAgICAgICAkdGhpcy5hZGRDbGFzcygnY29tcGFjdCcpO1xuICAgICAgICBjb21wYWN0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmICgkdGhpcy5oZWlnaHQoKSA8PSBtYXhIZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBTVEVQIDQ6IExhc3QgcmVzcG9uc2l2ZSBzZXQgLSBjb21wYWN0XG4gICAgICBpZiAoISRsaW5rc0xhc3QubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjsgLy8gTm8gb3RoZXIgbGlua3MgdG8gaGlkZSwgY2FuJ3QgZG8gbW9yZVxuICAgICAgfVxuICAgICAgaWYgKGNvbXBhY3QpIHtcbiAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2NvbXBhY3QnKTtcbiAgICAgICAgY29tcGFjdCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gQ29weSB0aGUgbGlzdCBpdGVtcyB0byB0aGUgZHJvcGRvd25cbiAgICAgIGlmICghY29waWVkMikge1xuICAgICAgICB2YXIgJGNsb25lczIgPSAkbGlua3NMYXN0LmNsb25lKCk7XG4gICAgICAgICRtZW51Q29udGVudHMucHJlcGVuZCgkY2xvbmVzMi5hZGRDbGFzcygnY2xvbmUgY2xvbmUtbGFzdCcpLnJlbW92ZUNsYXNzKCdsZWZ0c2lkZSByaWdodHNpZGUnKSk7XG4gICAgICAgIGNvcGllZDIgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKCFyZXNwb25zaXZlMikge1xuICAgICAgICAkbGlua3NMYXN0LmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgcmVzcG9uc2l2ZTIgPSB0cnVlO1xuICAgICAgICAkbWVudUNvbnRlbnRzLmNoaWxkcmVuKCcuY2xvbmUtbGFzdCcpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIGlmICgkdGhpcy5oZWlnaHQoKSA8PSBtYXhIZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBTVEVQIDU6IExhc3QgcmVzcG9uc2l2ZSBzZXQgKyBjb21wYWN0XG4gICAgICBpZiAoIWNvbXBhY3QpIHtcbiAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ2NvbXBhY3QnKTtcbiAgICAgICAgY29tcGFjdCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFwZXJzaXN0ZW50KSB7XG4gICAgICBwaHBiYi5yZWdpc3RlckRyb3Bkb3duKCRtZW51LmZpbmQoJ2EucmVzcG9uc2l2ZS1tZW51LWxpbmsnKSwgJG1lbnUuZmluZCgnLmRyb3Bkb3duJyksIGZhbHNlKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSBhcmUgYW55IGltYWdlcyBpbiB0aGUgbGlua3MgbGlzdCwgcnVuIHRoZSBjaGVjayBhZ2FpbiBhZnRlciB0aGV5IGhhdmUgbG9hZGVkXG4gICAgJGxpbmtzQWxsLmZpbmQoJ2ltZycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgJCh0aGlzKS5sb2FkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hlY2soKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgY2hlY2soKTtcbiAgICAkKHdpbmRvdykucmVzaXplKGNoZWNrKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEZpeCBjb250YWluZXIgZm9yIG1lc3NhZ2VzXG4gICAqL1xuICAkY29udGFpbmVyLmZpbmQoJy5wb3N0Ym9keScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICBjaGlsZHJlbiA9ICR0aGlzLmNoaWxkcmVuKCk7XG5cbiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09IDEgJiYgY2hpbGRyZW4uaXMoJ2RpdicpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgJHRoaXMud3JhcElubmVyKCc8ZGl2IGNsYXNzPVwicG9zdGJvZHktaW5uZXJcIiAvPicpO1xuICB9KTtcblxuICAvKipcbiAgICogQWRqdXN0IHBvc3Qgei1pbmRleCBmb3IgcG9zdCBwcm9maWxlcyBmb3IgYWxsIHBvc3RzXG4gICAqL1xuICAkKCcucG9zdHByb2ZpbGUnKS5lYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgdmFyIHogPSBNYXRoLm1heCgyOCAtIGksIDIpO1xuICAgICQodGhpcykuY3NzKCd6LWluZGV4Jywgeik7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBEbyBub3QgcnVuIGZ1bmN0aW9ucyBiZWxvdyBmb3Igb2xkIGJyb3dzZXJzXG4gICAqL1xuICBpZiAob2xkQnJvd3Nlcikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGp1c3QgdG9waWNsaXN0IGxpc3RzIHdpdGggY2hlY2sgYm94ZXNcbiAgICovXG4gICRjb250YWluZXIuZmluZCgndWwudG9waWNsaXN0IGRkLm1hcmsnKS5zaWJsaW5ncygnZHQnKS5jaGlsZHJlbignLmxpc3QtaW5uZXInKS5hZGRDbGFzcygnd2l0aC1tYXJrJyk7XG5cbiAgLyoqXG4gICAqIEFwcGVuZHMgY29udGVudHMgb2YgYWxsIGV4dHJhIGNvbHVtbnMgdG8gZmlyc3QgY29sdW1uIGluXG4gICAqIC50b3BpY2xpc3QgbGlzdHMgZm9yIG1vYmlsZSBkZXZpY2VzLiBDb3BpZXMgY29udGVudHMgYXMgaXMuXG4gICAqXG4gICAqIFRvIGFkZCB0aGF0IGZ1bmN0aW9uYWxpdHkgdG8gLnRvcGljbGlzdCBsaXN0IHNpbXBseSBhZGRcbiAgICogcmVzcG9uc2l2ZS1zaG93LWFsbCB0byBsaXN0IG9mIGNsYXNzZXNcbiAgICovXG4gICRjb250YWluZXIuZmluZCgnLnRvcGljbGlzdC5yZXNwb25zaXZlLXNob3ctYWxsID4gbGkgPiBkbCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAkYmxvY2sgPSAkdGhpcy5maW5kKCdkdCAucmVzcG9uc2l2ZS1zaG93Omxhc3QtY2hpbGQnKSxcbiAgICAgIGZpcnN0ID0gdHJ1ZTtcblxuICAgIC8vIENyZWF0ZSBibG9jayB0aGF0IGlzIHZpc2libGUgb25seSBvbiBtb2JpbGUgZGV2aWNlc1xuICAgIGlmICghJGJsb2NrLmxlbmd0aCkge1xuICAgICAgJHRoaXMuZmluZCgnZHQgPiAubGlzdC1pbm5lcicpLmFwcGVuZCgnPGRpdiBjbGFzcz1cInJlc3BvbnNpdmUtc2hvd1wiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiIC8+Jyk7XG4gICAgICAkYmxvY2sgPSAkdGhpcy5maW5kKCdkdCAucmVzcG9uc2l2ZS1zaG93Omxhc3QtY2hpbGQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmlyc3QgPSAoJC50cmltKCRibG9jay50ZXh0KCkpLmxlbmd0aCA9PT0gMCk7XG4gICAgfVxuXG4gICAgLy8gQ29weSBjb250ZW50cyBvZiBlYWNoIGNvbHVtblxuICAgICR0aGlzLmZpbmQoJ2RkJykubm90KCcubWFyaycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNvbHVtbiA9ICQodGhpcyksXG4gICAgICAgICRjaGlsZHJlbiA9IGNvbHVtbi5jaGlsZHJlbigpLFxuICAgICAgICBodG1sID0gY29sdW1uLmh0bWwoKTtcblxuICAgICAgaWYgKCRjaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgJGNoaWxkcmVuLnRleHQoKSA9PT0gY29sdW1uLnRleHQoKSkge1xuICAgICAgICBodG1sID0gJGNoaWxkcmVuLmh0bWwoKTtcbiAgICAgIH1cblxuICAgICAgJGJsb2NrLmFwcGVuZCgoZmlyc3QgPyAnJyA6ICc8YnIgLz4nKSArIGh0bWwpO1xuXG4gICAgICBmaXJzdCA9IGZhbHNlO1xuICAgIH0pO1xuICB9KTtcblxuICAvKipcbiAgICogU2FtZSBhcyBhYm92ZSwgYnV0IHByZXBlbmRzIHRleHQgZnJvbSBoZWFkZXIgdG8gZWFjaFxuICAgKiBjb2x1bW4gYmVmb3JlIGNvbnRlbnRzIG9mIHRoYXQgY29sdW1uLlxuICAgKlxuICAgKiBUbyBhZGQgdGhhdCBmdW5jdGlvbmFsaXR5IHRvIC50b3BpY2xpc3QgbGlzdCBzaW1wbHkgYWRkXG4gICAqIHJlc3BvbnNpdmUtc2hvdy1jb2x1bW5zIHRvIGxpc3Qgb2YgY2xhc3Nlc1xuICAgKi9cbiAgJGNvbnRhaW5lci5maW5kKCcudG9waWNsaXN0LnJlc3BvbnNpdmUtc2hvdy1jb2x1bW5zJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRsaXN0ID0gJCh0aGlzKSxcbiAgICAgIGhlYWRlcnMgPSBbXSxcbiAgICAgIGhlYWRlcnNMZW5ndGggPSAwO1xuXG4gICAgLy8gRmluZCBhbGwgaGVhZGVycywgZ2V0IGNvbnRlbnRzXG4gICAgJGxpc3QucHJldignLnRvcGljbGlzdCcpLmZpbmQoJ2xpLmhlYWRlciBkZCcpLm5vdCgnLm1hcmsnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIGhlYWRlcnMucHVzaCgkKHRoaXMpLnRleHQoKSk7XG4gICAgICBoZWFkZXJzTGVuZ3RoKys7XG4gICAgfSk7XG5cbiAgICBpZiAoIWhlYWRlcnNMZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBQYXJzZSBlYWNoIHJvd1xuICAgICRsaXN0LmZpbmQoJ2RsJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgICAkYmxvY2sgPSAkdGhpcy5maW5kKCdkdCAucmVzcG9uc2l2ZS1zaG93Omxhc3QtY2hpbGQnKSxcbiAgICAgICAgZmlyc3QgPSB0cnVlO1xuXG4gICAgICAvLyBDcmVhdGUgYmxvY2sgdGhhdCBpcyB2aXNpYmxlIG9ubHkgb24gbW9iaWxlIGRldmljZXNcbiAgICAgIGlmICghJGJsb2NrLmxlbmd0aCkge1xuICAgICAgICAkdGhpcy5maW5kKCdkdCA+IC5saXN0LWlubmVyJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwicmVzcG9uc2l2ZS1zaG93XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCIgLz4nKTtcbiAgICAgICAgJGJsb2NrID0gJHRoaXMuZmluZCgnZHQgLnJlc3BvbnNpdmUtc2hvdzpsYXN0LWNoaWxkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaXJzdCA9ICgkLnRyaW0oJGJsb2NrLnRleHQoKSkubGVuZ3RoID09PSAwKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29weSBjb250ZW50cyBvZiBlYWNoIGNvbHVtblxuICAgICAgJHRoaXMuZmluZCgnZGQnKS5ub3QoJy5tYXJrJykuZWFjaChmdW5jdGlvbiAoaSkge1xuICAgICAgICB2YXIgY29sdW1uID0gJCh0aGlzKSxcbiAgICAgICAgICBjaGlsZHJlbiA9IGNvbHVtbi5jaGlsZHJlbigpLFxuICAgICAgICAgIGh0bWwgPSBjb2x1bW4uaHRtbCgpO1xuXG4gICAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgY2hpbGRyZW4udGV4dCgpID09PSBjb2x1bW4udGV4dCgpKSB7XG4gICAgICAgICAgaHRtbCA9IGNoaWxkcmVuLmh0bWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByZXBlbmQgY29udGVudHMgb2YgbWF0Y2hpbmcgaGVhZGVyIGJlZm9yZSBjb250ZW50cyBvZiBjb2x1bW5cbiAgICAgICAgaWYgKGkgPCBoZWFkZXJzTGVuZ3RoKSB7XG4gICAgICAgICAgaHRtbCA9IGhlYWRlcnNbaV0gKyAnOiA8c3Ryb25nPicgKyBodG1sICsgJzwvc3Ryb25nPic7XG4gICAgICAgIH1cblxuICAgICAgICAkYmxvY2suYXBwZW5kKChmaXJzdCA/ICcnIDogJzxiciAvPicpICsgaHRtbCk7XG5cbiAgICAgICAgZmlyc3QgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICAvKipcbiAgICogUmVzcG9uc2l2ZSB0YWJsZXNcbiAgICovXG4gICRjb250YWluZXIuZmluZCgndGFibGUudGFibGUxJykubm90KCcubm90LXJlc3BvbnNpdmUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgJHRoID0gJHRoaXMuZmluZCgndGhlYWQgPiB0ciA+IHRoJyksXG4gICAgICBoZWFkZXJzID0gW10sXG4gICAgICB0b3RhbEhlYWRlcnMgPSAwLFxuICAgICAgaSwgaGVhZGVyc0xlbmd0aDtcblxuICAgIC8vIEZpbmQgZWFjaCBoZWFkZXJcbiAgICAkdGguZWFjaChmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICB2YXIgY2VsbCA9ICQodGhpcyksXG4gICAgICAgIGNvbHNwYW4gPSBwYXJzZUludChjZWxsLmF0dHIoJ2NvbHNwYW4nKSwgMTApLFxuICAgICAgICBkZm4gPSBjZWxsLmF0dHIoJ2RhdGEtZGZuJyksXG4gICAgICAgIHRleHQgPSBkZm4gPyBkZm4gOiBjZWxsLnRleHQoKTtcblxuICAgICAgY29sc3BhbiA9IGlzTmFOKGNvbHNwYW4pIHx8IGNvbHNwYW4gPCAxID8gMSA6IGNvbHNwYW47XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBjb2xzcGFuOyBpKyspIHtcbiAgICAgICAgaGVhZGVycy5wdXNoKHRleHQpO1xuICAgICAgfVxuICAgICAgdG90YWxIZWFkZXJzKys7XG5cbiAgICAgIGlmIChkZm4gJiYgIWNvbHVtbikge1xuICAgICAgICAkdGhpcy5hZGRDbGFzcygnc2hvdy1oZWFkZXInKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGhlYWRlcnNMZW5ndGggPSBoZWFkZXJzLmxlbmd0aDtcblxuICAgIC8vIEFkZCBoZWFkZXIgdGV4dCB0byBlYWNoIGNlbGwgYXMgPGRmbj5cbiAgICAkdGhpcy5hZGRDbGFzcygncmVzcG9uc2l2ZScpO1xuXG4gICAgaWYgKHRvdGFsSGVhZGVycyA8IDIpIHtcbiAgICAgICR0aGlzLmFkZENsYXNzKCdzaG93LWhlYWRlcicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgICR0aGlzLmZpbmQoJ3Rib2R5ID4gdHInKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByb3cgPSAkKHRoaXMpLFxuICAgICAgICBjZWxscyA9IHJvdy5jaGlsZHJlbigndGQnKSxcbiAgICAgICAgY29sdW1uID0gMDtcblxuICAgICAgaWYgKGNlbGxzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByb3cuYWRkQ2xhc3MoJ2JpZy1jb2x1bW4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjZWxscy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNlbGwgPSAkKHRoaXMpLFxuICAgICAgICAgIGNvbHNwYW4gPSBwYXJzZUludChjZWxsLmF0dHIoJ2NvbHNwYW4nKSwgMTApLFxuICAgICAgICAgIHRleHQgPSAkLnRyaW0oY2VsbC50ZXh0KCkpO1xuXG4gICAgICAgIGlmIChoZWFkZXJzTGVuZ3RoIDw9IGNvbHVtbikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgodGV4dC5sZW5ndGggJiYgdGV4dCAhPT0gJy0nKSB8fCBjZWxsLmNoaWxkcmVuKCkubGVuZ3RoKSB7XG4gICAgICAgICAgY2VsbC5wcmVwZW5kKCc8ZGZuIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj4nICsgaGVhZGVyc1tjb2x1bW5dICsgJzwvZGZuPicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNlbGwuYWRkQ2xhc3MoJ2VtcHR5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb2xzcGFuID0gaXNOYU4oY29sc3BhbikgfHwgY29sc3BhbiA8IDEgPyAxIDogY29sc3BhbjtcbiAgICAgICAgY29sdW1uICs9IGNvbHNwYW47XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEhpZGUgZW1wdHkgcmVzcG9uc2l2ZSB0YWJsZXNcbiAgICovXG4gICRjb250YWluZXIuZmluZCgndGFibGUucmVzcG9uc2l2ZSA+IHRib2R5Jykubm90KCcucmVzcG9uc2l2ZS1za2lwLWVtcHR5JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRpdGVtcyA9ICQodGhpcykuY2hpbGRyZW4oJ3RyJyk7XG4gICAgaWYgKCEkaXRlbXMubGVuZ3RoKSB7XG4gICAgICAkKHRoaXMpLnBhcmVudCgndGFibGU6Zmlyc3QnKS5hZGRDbGFzcygncmVzcG9uc2l2ZS1oaWRlJyk7XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogUmVzcG9uc2l2ZSB0YWJzXG4gICAqL1xuICAkY29udGFpbmVyLmZpbmQoJyN0YWJzLCAjbWluaXRhYnMnKS5ub3QoJ1tkYXRhLXNraXAtcmVzcG9uc2l2ZV0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgJHVsID0gJHRoaXMuY2hpbGRyZW4oKSxcbiAgICAgICR0YWJzID0gJHVsLmNoaWxkcmVuKCkubm90KCdbZGF0YS1za2lwLXJlc3BvbnNpdmVdJyksXG4gICAgICAkbGlua3MgPSAkdGFicy5jaGlsZHJlbignYScpLFxuICAgICAgJGl0ZW0gPSAkdWwuYXBwZW5kKCc8bGkgY2xhc3M9XCJ0YWIgcmVzcG9uc2l2ZS10YWJcIiBzdHlsZT1cImRpc3BsYXk6bm9uZTtcIj48YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGNsYXNzPVwicmVzcG9uc2l2ZS10YWItbGlua1wiPiZuYnNwOzwvYT48ZGl2IGNsYXNzPVwiZHJvcGRvd24gdGFiLWRyb3Bkb3duXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjxkaXYgY2xhc3M9XCJwb2ludGVyXCI+PGRpdiBjbGFzcz1cInBvaW50ZXItaW5uZXJcIiAvPjwvZGl2Pjx1bCBjbGFzcz1cImRyb3Bkb3duLWNvbnRlbnRzXCIgLz48L2Rpdj48L2xpPicpLmZpbmQoJ2xpLnJlc3BvbnNpdmUtdGFiJyksXG4gICAgICAkbWVudSA9ICRpdGVtLmZpbmQoJy5kcm9wZG93bi1jb250ZW50cycpLFxuICAgICAgbWF4SGVpZ2h0ID0gMCxcbiAgICAgIGxhc3RXaWR0aCA9IGZhbHNlLFxuICAgICAgcmVzcG9uc2l2ZSA9IGZhbHNlO1xuXG4gICAgJGxpbmtzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgIG1heEhlaWdodCA9IE1hdGgubWF4KG1heEhlaWdodCwgTWF0aC5tYXgoJHRoaXMub3V0ZXJIZWlnaHQodHJ1ZSksICR0aGlzLnBhcmVudCgpLm91dGVySGVpZ2h0KHRydWUpKSk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBjaGVjaygpIHtcbiAgICAgIHZhciB3aWR0aCA9ICRib2R5LndpZHRoKCksXG4gICAgICAgIGhlaWdodCA9ICR0aGlzLmhlaWdodCgpO1xuXG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGggJiYgKCFyZXNwb25zaXZlIHx8IHdpZHRoIDw9IGxhc3RXaWR0aCkgJiYgaGVpZ2h0IDw9IG1heEhlaWdodCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgICR0YWJzLnNob3coKTtcbiAgICAgICRpdGVtLmhpZGUoKTtcblxuICAgICAgbGFzdFdpZHRoID0gd2lkdGg7XG4gICAgICBoZWlnaHQgPSAkdGhpcy5oZWlnaHQoKTtcbiAgICAgIGlmIChoZWlnaHQgPD0gbWF4SGVpZ2h0KSB7XG4gICAgICAgIGlmICgkaXRlbS5oYXNDbGFzcygnZHJvcGRvd24tdmlzaWJsZScpKSB7XG4gICAgICAgICAgcGhwYmIudG9nZ2xlRHJvcGRvd24uY2FsbCgkaXRlbS5maW5kKCdhLnJlc3BvbnNpdmUtdGFiLWxpbmsnKS5nZXQoMCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVzcG9uc2l2ZSA9IHRydWU7XG4gICAgICAkaXRlbS5zaG93KCk7XG4gICAgICAkbWVudS5odG1sKCcnKTtcblxuICAgICAgdmFyICRhdmFpbGFibGVUYWJzID0gJHRhYnMuZmlsdGVyKCc6bm90KC5hY3RpdmV0YWIsIC5yZXNwb25zaXZlLXRhYiknKSxcbiAgICAgICAgdG90YWwgPSAkYXZhaWxhYmxlVGFicy5sZW5ndGgsXG4gICAgICAgIGksICR0YWI7XG5cbiAgICAgIGZvciAoaSA9IHRvdGFsIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgJHRhYiA9ICRhdmFpbGFibGVUYWJzLmVxKGkpO1xuICAgICAgICAkbWVudS5wcmVwZW5kKCR0YWIuY2xvbmUodHJ1ZSkucmVtb3ZlQ2xhc3MoJ3RhYicpKTtcbiAgICAgICAgJHRhYi5oaWRlKCk7XG4gICAgICAgIGlmICgkdGhpcy5oZWlnaHQoKSA8PSBtYXhIZWlnaHQpIHtcbiAgICAgICAgICAkbWVudS5maW5kKCdhJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2hlY2sodHJ1ZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAkbWVudS5maW5kKCdhJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGVjayh0cnVlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciAkdGFiTGluayA9ICRpdGVtLmZpbmQoJ2EucmVzcG9uc2l2ZS10YWItbGluaycpO1xuICAgIHBocGJiLnJlZ2lzdGVyRHJvcGRvd24oJHRhYkxpbmssICRpdGVtLmZpbmQoJy5kcm9wZG93bicpLCB7XG4gICAgICB2aXNpYmxlQ2xhc3M6ICdhY3RpdmV0YWInXG4gICAgfSk7XG5cbiAgICBjaGVjayh0cnVlKTtcbiAgICAkKHdpbmRvdykucmVzaXplKGNoZWNrKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEhpZGUgVUNQL01DUCBuYXZpZ2F0aW9uIGlmIHRoZXJlIGlzIG9ubHkgMSBpdGVtXG4gICAqL1xuICAkY29udGFpbmVyLmZpbmQoJyNuYXZpZ2F0aW9uJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRpdGVtcyA9ICQodGhpcykuY2hpbGRyZW4oJ29sLCB1bCcpLmNoaWxkcmVuKCdsaScpO1xuICAgIGlmICgkaXRlbXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdyZXNwb25zaXZlLWhpZGUnKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBSZXBsYWNlIHJlc3BvbnNpdmUgdGV4dFxuICAgKi9cbiAgJGNvbnRhaW5lci5maW5kKCdbZGF0YS1yZXNwb25zaXZlLXRleHRdJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgIGZ1bGxUZXh0ID0gJHRoaXMudGV4dCgpLFxuICAgICAgcmVzcG9uc2l2ZVRleHQgPSAkdGhpcy5hdHRyKCdkYXRhLXJlc3BvbnNpdmUtdGV4dCcpLFxuICAgICAgcmVzcG9uc2l2ZSA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gY2hlY2soKSB7XG4gICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA3MDApIHtcbiAgICAgICAgaWYgKCFyZXNwb25zaXZlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgICR0aGlzLnRleHQoZnVsbFRleHQpO1xuICAgICAgICByZXNwb25zaXZlID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChyZXNwb25zaXZlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgICR0aGlzLnRleHQocmVzcG9uc2l2ZVRleHQpO1xuICAgICAgcmVzcG9uc2l2ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgY2hlY2soKTtcbiAgICAkKHdpbmRvdykucmVzaXplKGNoZWNrKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIFN0YXRpYyBuYXZpZ2F0aW9uXG4gICAqL1xuICBpZiAoc3R5bGVDb25maWcuc3RhdGljTmF2aWdhdGlvbikge1xuICAgICRjb250YWluZXIuZmluZCgnLm5hdmJhci50YWJiZWQgPiAuaW5uZXInKS5lYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICB2YXIgbmF2ID0gdGhpcyxcbiAgICAgICAgbmF2aWdhdGlvbiA9ICQobmF2KSxcbiAgICAgICAgaXNTdGF0aWMgPSBmYWxzZSxcbiAgICAgICAgcGFyZW50ID0gbmF2aWdhdGlvbi5wYXJlbnQoKSxcbiAgICAgICAgaW5uZXIsXG4gICAgICAgICR3ID0gJCh3aW5kb3cpLFxuICAgICAgICBtaW5Ub3BQb3NpdGlvbiA9IDAsXG4gICAgICAgIG1pbldpZHRoID0gc3R5bGVDb25maWcuc3RhdGljTmF2aWdhdGlvbk1pbldpZHRoLFxuICAgICAgICBtaW5IZWlnaHQgPSBzdHlsZUNvbmZpZy5zdGF0aWNOYXZpZ2F0aW9uTWluSGVpZ2h0LFxuICAgICAgICB3aW5kb3dXaWR0aCxcbiAgICAgICAgcXVldWVkID0gZmFsc2UsXG4gICAgICAgIHRocm90dGxlZCA9IGZhbHNlLFxuICAgICAgICBuYXZiYXJCb3ggPSAkKCcuaW5uZXIucGFnZS13aWR0aC5jYXJkJyksXG4gICAgICAgIGhlYWRlckJveCA9ICQoJyNwYWdlLWhlYWRlci1ib3guY2FyZCcpLFxuICAgICAgICBicmVha0xpbmUgPSAwLFxuICAgICAgICBjdXJyT2Zmc2V0ID0gMCxcbiAgICAgICAgcHJldk9mZnNldCA9IDA7XG5cbiAgICAgIGZ1bmN0aW9uIGVuYWJsZVN0YXRpYygpIHtcbiAgICAgICAgJCgnI3BhZ2UtaGVhZGVyLWJveCcpLmNzcygncGFkZGluZy10b3AnLCBNYXRoLmZsb29yKG5hdmlnYXRpb24uaGVpZ2h0KCkpICsgJ3B4Jyk7XG4gICAgICAgIG5hdmlnYXRpb24uYWRkQ2xhc3MoJ3N0YXRpYycpO1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2xhc3MoJ25vdC1zdGF0aWMnKTtcbiAgICAgICAgaXNTdGF0aWMgPSB0cnVlO1xuICAgICAgICBjaGVja05hdmlnYXRpb24odHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGRpc2FibGVTdGF0aWMoKSB7XG4gICAgICAgICQoJyNwYWdlLWhlYWRlci1ib3gnKS5jc3MoJ3BhZGRpbmctdG9wJywgMCk7XG4gICAgICAgIG5hdmJhckJveC5hdHRyKCdkYXRhLWNhcmQnLCAwKTtcbiAgICAgICAgaGVhZGVyQm94LmF0dHIoJ2RhdGEtY2FyZCcsIDEpO1xuICAgICAgICBuYXZpZ2F0aW9uLnJlbW92ZUNsYXNzKCdzdGF0aWMnKTtcbiAgICAgICAgcGFyZW50LmFkZENsYXNzKCdub3Qtc3RhdGljJyk7XG4gICAgICAgIGlzU3RhdGljID0gZmFsc2U7XG4gICAgICAgIGNoZWNrTmF2aWdhdGlvbih0cnVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdGVzdEhhc2goKSB7XG4gICAgICAgIHZhciBoYXNoID0gKHdpbmRvdy5sb2NhdGlvbi5oYXNoKSA/IHdpbmRvdy5sb2NhdGlvbi5oYXNoIDogJyc7XG4gICAgICAgIGlmICghaGFzaCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oJHcuc2Nyb2xsTGVmdCgpLCAkdy5zY3JvbGxUb3AoKSAtIG5hdmlnYXRpb24uaGVpZ2h0KCkpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjaGVjayhjaGVja0hhc2gpIHtcbiAgICAgICAgdmFyIHdpbmRvd1RvcCA9IDAsXG4gICAgICAgICAgd2luZG93V2lkdGggPSBNYXRoLmZsb29yKCR3LndpZHRoKCkpLFxuICAgICAgICAgIHRvcDtcblxuICAgICAgICBpZiAod2luZG93V2lkdGggPCBtaW5XaWR0aCB8fCAkdy5oZWlnaHQoKSA8IG1pbkhlaWdodCkge1xuICAgICAgICAgIGlmIChpc1N0YXRpYykge1xuICAgICAgICAgICAgZGlzYWJsZVN0YXRpYygpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1N0YXRpYykge1xuICAgICAgICAgIC8vIG5hdkhlaWdodCA9IG5hdmlnYXRpb24uaGVpZ2h0KCk7XG4gICAgICAgICAgdG9wID0gbmF2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgICAgICAgICBpZiAodG9wID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtaW5Ub3BQb3NpdGlvbiA9ICR3LnNjcm9sbFRvcCgpICsgdG9wO1xuICAgICAgICAgIGVuYWJsZVN0YXRpYygpO1xuICAgICAgICAgIGlmIChjaGVja0hhc2gpIHtcbiAgICAgICAgICAgIHRlc3RIYXNoKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJHcuc2Nyb2xsVG9wKCkgPCBtaW5Ub3BQb3NpdGlvbikge1xuICAgICAgICAgIGRpc2FibGVTdGF0aWMoKTtcbiAgICAgICAgfSBlbHNlIGlmIChjaGVja0hhc2gpIHtcbiAgICAgICAgICB0ZXN0SGFzaCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAkdy5vbignc2Nyb2xsIHJlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFpc1N0YXRpYykge1xuICAgICAgICAgIGNoZWNrKGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIXRocm90dGxlZCkge1xuICAgICAgICAgICAgY2hlY2soZmFsc2UpO1xuICAgICAgICAgICAgdGhyb3R0bGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHF1ZXVlZCA9IGZhbHNlO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHRocm90dGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICBpZiAocXVldWVkKSB7XG4gICAgICAgICAgICAgICAgY2hlY2soZmFsc2UpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAyNTApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBxdWV1ZWQgPSB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIFNtb290aCB0cmFuc2l0aW9uIHNoYWRvdyBib3ggZnJvbSBoZWFkZXIgdG8gbmF2YmFyXG4gICAgICAgICAgICogLS0tICAgICAgazkxMUBlbGVrdHJ5Y3pueS50ayDCqSAyMDE2ICAgICAgICAgICAtLS1cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBjdXJyT2Zmc2V0ID0gJHcuc2Nyb2xsVG9wKCk7XG4gICAgICAgICAgYnJlYWtMaW5lID0gaGVhZGVyQm94LmhlaWdodCgpO1xuICAgICAgICAgIGlmIChNYXRoLmFicyhjdXJyT2Zmc2V0IC0gcHJldk9mZnNldCkgPiBNYXRoLmFicyhicmVha0xpbmUgLSBwcmV2T2Zmc2V0KSkge1xuICAgICAgICAgICAgaWYgKGN1cnJPZmZzZXQgPCBicmVha0xpbmUpIHtcbiAgICAgICAgICAgICAgbmF2YmFyQm94LmF0dHIoJ2RhdGEtY2FyZCcsIDApO1xuICAgICAgICAgICAgICBoZWFkZXJCb3guYXR0cignZGF0YS1jYXJkJywgMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBuYXZiYXJCb3guYXR0cignZGF0YS1jYXJkJywgMSk7XG4gICAgICAgICAgICAgIGhlYWRlckJveC5hdHRyKCdkYXRhLWNhcmQnLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZPZmZzZXQgPSBjdXJyT2Zmc2V0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAkdy5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hlY2sodHJ1ZSk7XG4gICAgICB9KTtcbiAgICAgICR3Lm9uKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGVjayh0cnVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEVtcHR5IGxhc3QgcG9zdCBjb2x1bW5cbiAgICovXG4gICRjb250YWluZXIuZmluZCgnZGQubGFzdHBvc3QgPiBzcGFuOm9ubHktY2hpbGQgPiBicjpvbmx5LWNoaWxkJykucGFyZW50cygnZGQubGFzdHBvc3QnKS5hZGRDbGFzcygnZW1wdHknKTtcblxuICAvKipcbiAgICogU3BvaWxlciDDoCBsYSB3eWtvcC5wbFxuICAgKiBVc2FnZTpcbiAgICogXHR8IDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJzcG9pbGVyXCI+cG9rYcW8IHNwb2lsZXI8L2E+XG4gICAqXHR8IDxjb2RlIGNsYXNzPVwic3BvaWxlclwiPntURVhUfTwvY29kZT5cbiAgICovXG4gICQoJ2Euc3BvaWxlcicpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICQodGhpcykubmV4dCgnZGl2LnNwb2lsZXInKS5zaG93KCk7XG4gICAgJCh0aGlzKS5oaWRlKCk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBIRCBpbWFnZXNcbiAgICovXG4gIGlmICh3aW5kb3cubWF0Y2hNZWRpYSAmJiB3aW5kb3cubWF0Y2hNZWRpYSgnKC13ZWJraXQtbWluLWRldmljZS1waXhlbC1yYXRpbzogMiksIChtaW4tcmVzb2x1dGlvbjogMTkyZHBpKSwgKG1pbi1yZXNvbHV0aW9uOiAxLjVkcHB4KScpLm1hdGNoZXMpIHtcbiAgICAkY29udGFpbmVyLmZpbmQoJ2ltZ1tkYXRhLXNyYy1oZF0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpbWcgPSB0aGlzLFxuICAgICAgICAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgIGhkSW1hZ2UgPSBuZXcgSW1hZ2UoKSxcbiAgICAgICAgaGRMb2FkZWQgPSBmYWxzZSxcbiAgICAgICAgbm9ybWFsTG9hZGVkID0gZmFsc2U7XG5cbiAgICAgIGZ1bmN0aW9uIHJlcGxhY2VJbWFnZSgpIHtcbiAgICAgICAgJHRoaXMuY3NzKCd3aWR0aCcsIChpbWcubmF0dXJhbFdpZHRoID8gaW1nLm5hdHVyYWxXaWR0aCA6IGltZy53aWR0aCkgKyAncHgnKTtcbiAgICAgICAgaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgaW1nLmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMtaGQnKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbWcuY29tcGxldGUpIHtcbiAgICAgICAgbm9ybWFsTG9hZGVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKG5vcm1hbExvYWRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBub3JtYWxMb2FkZWQgPSB0cnVlO1xuICAgICAgICAgIGlmIChoZExvYWRlZCkge1xuICAgICAgICAgICAgcmVwbGFjZUltYWdlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBoZEltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaGRMb2FkZWQgPSB0cnVlO1xuICAgICAgICBpZiAobm9ybWFsTG9hZGVkKSB7XG4gICAgICAgICAgcmVwbGFjZUltYWdlKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBoZEltYWdlLnNyYyA9IGltZy5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3JjLWhkJyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU3BsaXQgYnV0dG9uc1xuICAgKi9cbiAgJGNvbnRhaW5lci5maW5kKCdkaXYuYnV0dG9ucyBhLmJ1dHRvbi5pY29uLWJ1dHRvbicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICB3b3JkcztcblxuICAgIGlmICgkdGhpcy5jaGlsZHJlbigpLmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgd29yZHMgPSAkdGhpcy50ZXh0KCkudHJpbSgpLnNwbGl0KCcgJyk7XG4gICAgaWYgKHdvcmRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICR0aGlzLnRleHQod29yZHMuc2hpZnQoKSArICcgJykuYXBwZW5kKCc8c3Ryb25nIC8+Jyk7XG4gICAgICAkdGhpcy5maW5kKCdzdHJvbmcnKS50ZXh0KHdvcmRzLmpvaW4oJyAnKSk7XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogQWRkIG9ubGluZSBzdGF0dXNcbiAgICovXG4gICQoJyNwaHBiYi5jYW4tdHJhbnNmb3JtW2RhdGEtb25saW5lLXRleHRdJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRleHQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtb25saW5lLXRleHQnKTtcblxuICAgICRjb250YWluZXIuZmluZCgnLm9ubGluZScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcblxuICAgICAgJHRoaXMuY3NzKCdwb3NpdGlvbicsICdyZWxhdGl2ZScpLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJvbmxpbmUtcmliYm9uXCI+PHNwYW4+JyArIHRleHQgKyAnPC9zcGFuPjxzcGFuPicgKyB0ZXh0ICsgJzwvc3Bhbj48L3NwYW4+Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBFeHRlbmQgcG9zdGVyIHByb2ZpbGVcbiAgICovXG4gIGlmIChzdHlsZUNvbmZpZy5fbG9hZGVkKSB7XG4gICAgJGNvbnRhaW5lci5maW5kKCcucG9zdHByb2ZpbGUgKyAucG9zdGJvZHkgPiBkaXY6b25seS1jaGlsZCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgYWRqdXN0UG9zdGVyUHJvZmlsZSgkKHRoaXMpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsYXBzZSBmb3J1bXNcbiAgICovXG4gIGlmIChzdHlsZUNvbmZpZy5jb2xsYXBzZUZvcnVtcykge1xuICAgICRjb250YWluZXIuZmluZCgnLmZvcmFiZyBsaS5oZWFkZXInKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgIGZvcnVtID0gJHRoaXMucGFyZW50KCkubmV4dCgndWwuZm9ydW1zJyksXG4gICAgICAgIGlkID0gMCxcbiAgICAgICAgdG9nZ2xlZCA9IGZhbHNlLFxuICAgICAgICB0b2dnbGU7XG5cbiAgICAgIGlmIChmb3J1bS5sZW5ndGggIT0gMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEZpbmQgY2F0ZWdvcnkgaWRcbiAgICAgICQoJ2FbZGF0YS1pZF0nLCAkdGhpcykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlkID0gcGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSk7XG4gICAgICB9KTtcbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgZm9ydW0uZmluZCgnLmZvcnVtdGl0bGVbZGF0YS1pZF06Zmlyc3QnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZCA9IHBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykpO1xuICAgICAgICAgIGlmICghaXNOYU4oaWQpKSB7XG4gICAgICAgICAgICBpZCA9ICdmJyArIGlkO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoIWlkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHRvZ2dsZSBjb2RlXG4gICAgICAkdGhpcy5hcHBlbmQoJzxhIGNsYXNzPVwiZm9ydW0tdG9nZ2xlXCIgaHJlZj1cIiNcIj48L2E+Jyk7XG4gICAgICB0b2dnbGUgPSAkdGhpcy5maW5kKCcuZm9ydW0tdG9nZ2xlJyk7XG4gICAgICB0b2dnbGUuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0b2dnbGVkKSB7XG4gICAgICAgICAgZm9ydW0uc3RvcCh0cnVlLCB0cnVlKS5zbGlkZURvd24oMjAwKTtcbiAgICAgICAgICB0b2dnbGVkID0gZmFsc2U7XG4gICAgICAgICAgdG9nZ2xlLnJlbW92ZUNsYXNzKCd0b2dnbGVkJyk7XG4gICAgICAgICAgcGhwYmIuZGVsZXRlQ29va2llKCd0b2dnbGVkLScgKyBpZCwgc3R5bGVDb25maWcuY29va2llQ29uZmlnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9ydW0uc3RvcCh0cnVlLCB0cnVlKS5zbGlkZVVwKDIwMCk7XG4gICAgICAgIHRvZ2dsZWQgPSB0cnVlO1xuICAgICAgICB0b2dnbGUuYWRkQ2xhc3MoJ3RvZ2dsZWQnKTtcbiAgICAgICAgcGhwYmIuc2V0Q29va2llKCd0b2dnbGVkLScgKyBpZCwgJzEnLCBzdHlsZUNvbmZpZy5jb29raWVDb25maWcpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENoZWNrIGRlZmF1bHQgc3RhdGVcbiAgICAgIGlmIChwaHBiYi5nZXRDb29raWUoJ3RvZ2dsZWQtJyArIGlkLCBzdHlsZUNvbmZpZy5jb29raWVDb25maWcpID09ICcxJykge1xuICAgICAgICBmb3J1bS5zdG9wKHRydWUsIHRydWUpLnNsaWRlVXAoMCk7XG4gICAgICAgIHRvZ2dsZWQgPSB0cnVlO1xuICAgICAgICB0b2dnbGUuYWRkQ2xhc3MoJ3RvZ2dsZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIFJ1biBvbmxvYWQgZnVuY3Rpb25zXG4gKi9cbmpRdWVyeShmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgZnVuY3Rpb24gcHJvY2Vzc1Jlc2l6ZUV2ZW50KCkge1xuICAgIHN0eWxlQ29uZmlnLl9yZXNpemVUaHJvdHRsZWQgPSBmYWxzZTtcblxuICAgIGNoZWNrTmF2aWdhdGlvbihmYWxzZSk7XG5cbiAgICBpZiAoc3R5bGVDb25maWcuZXh0ZW5kUG9zdGVyUHJvZmlsZSkge1xuICAgICAgJCgnLnBvc3Rwcm9maWxlICsgLnBvc3Rib2R5ID4gZGl2Om9ubHktY2hpbGQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYWRqdXN0UG9zdGVyUHJvZmlsZSgkKHRoaXMpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHZhciB0cmFuc2Zvcm1zID0gWyd0cmFuc2Zvcm0nLCAnd2Via2l0VHJhbnNmb3JtJywgJ21zVHJhbnNmb3JtJ10sXG4gICAgaSwgdGVzdDtcblxuICAvLyBDb29raWUgY29uZmlndXJhdGlvblxuICBzdHlsZUNvbmZpZy5jb29raWVDb25maWcgPSB7XG4gICAgcHJlZml4OiAnJyxcbiAgICBwYXRoOiAnLycsXG4gICAgZXhwaXJlczogbmV3IERhdGUoKVxuICB9O1xuICBzdHlsZUNvbmZpZy5jb29raWVDb25maWcuZXhwaXJlcy5zZXRGdWxsWWVhcihzdHlsZUNvbmZpZy5jb29raWVDb25maWcuZXhwaXJlcy5nZXRGdWxsWWVhcigpICsgMSk7XG5cbiAgLy8gU3dhcCAubm9qcyBhbmQgLmhhc2pzXG4gICQoJyNwaHBiYi5ub2pzJykudG9nZ2xlQ2xhc3MoJ25vanMgaGFzanMnKTtcbiAgJCgnI3BocGJiJykudG9nZ2xlQ2xhc3MoJ2hhc3RvdWNoJywgcGhwYmIuaXNUb3VjaCk7XG4gICQoJyNwaHBiYi5oYXN0b3VjaCcpLnJlbW92ZUNsYXNzKCdub3RvdWNoJyk7XG5cbiAgLy8gRm9jdXMgZm9ybXNcbiAgJCgnZm9ybVtkYXRhLWZvY3VzXTpmaXJzdCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICQoJyMnICsgdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtZm9jdXMnKSkuZm9jdXMoKTtcbiAgfSk7XG5cbiAgLy8gQ2hlY2sgZm9yIHRyYW5zZm9ybWF0aW9uc1xuICB0ZXN0ID0gJCgnI3BocGJiJykuZ2V0KDApO1xuICBmb3IgKGkgPSAwOyBpIDwgdHJhbnNmb3Jtcy5sZW5ndGg7IGkrKykge1xuICAgIGlmICh0eXBlb2YgKHRlc3Quc3R5bGVbdHJhbnNmb3Jtc1tpXV0pICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgJCgnI3BocGJiJykuYWRkQ2xhc3MoJ2Nhbi10cmFuc2Zvcm0nKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vIENvb2tpZXNcbiAgcGhwYmIuc2V0Q29va2llID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlLCBjb25maWcpIHtcbiAgICBjb25maWcgPSAkLmV4dGVuZCh7XG4gICAgICBwcmVmaXg6ICcnLFxuICAgICAgcGF0aDogJy8nXG4gICAgfSwgdHlwZW9mIGNvbmZpZyA9PT0gJ29iamVjdCcgPyBjb25maWcgOiB7fSk7XG5cbiAgICBkb2N1bWVudC5jb29raWUgPSBjb25maWcucHJlZml4ICsgbmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkgK1xuICAgICAgKGNvbmZpZy5leHBpcmVzID09PSB1bmRlZmluZWQgPyAnJyA6ICc7ZXhwaXJlcz0nICsgY29uZmlnLmV4cGlyZXMudG9VVENTdHJpbmcoKSkgK1xuICAgICAgKGNvbmZpZy5wYXRoID8gJztwYXRoPScgKyBjb25maWcucGF0aCA6ICcnKSArXG4gICAgICAoY29uZmlnLmRvbWFpbiA/ICc7ZG9tYWluPScgKyBjb25maWcuZG9tYWluIDogJycpO1xuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIHBocGJiLmdldENvb2tpZSA9IGZ1bmN0aW9uIChuYW1lLCBjb25maWcpIHtcbiAgICB2YXIgZXhwciwgY29va2llO1xuXG4gICAgY29uZmlnID0gJC5leHRlbmQoe1xuICAgICAgcHJlZml4OiAnJyxcbiAgICAgIHBhdGg6ICcvJ1xuICAgIH0sIHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnID8gY29uZmlnIDoge30pO1xuXG4gICAgZXhwciA9IG5ldyBSZWdFeHAoJyhefCApJyArIGNvbmZpZy5wcmVmaXggKyBuYW1lICsgJz0oW147XSspKDt8JCknKTtcbiAgICBjb29raWUgPSBleHByLmV4ZWMoZG9jdW1lbnQuY29va2llKTtcblxuICAgIGlmIChjb29raWUpIHtcbiAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoY29va2llWzJdKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgcGhwYmIuZGVsZXRlQ29va2llID0gZnVuY3Rpb24gKG5hbWUsIGNvbmZpZykge1xuICAgIGNvbmZpZyA9ICQuZXh0ZW5kKHtcbiAgICAgIHByZWZpeDogJycsXG4gICAgICBwYXRoOiAnLydcbiAgICB9LCB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyA/IGNvbmZpZyA6IHt9KTtcblxuICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvbmZpZy5wcmVmaXggKyBuYW1lICsgJz0nICtcbiAgICAgIChjb25maWcucGF0aCA/ICc7IHBhdGg9JyArIGNvbmZpZy5wYXRoIDogJycpICtcbiAgICAgIChjb25maWcuZG9tYWluID8gJzsgZG9tYWluPScgKyBjb25maWcuZG9tYWluIDogJycpICtcbiAgICAgICc7IGV4cGlyZXM9VGh1LCAwMS1KYW4tNzAgMDA6MDA6MDEgR01UJztcblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8vIFJlc3BvbnNpdmUgbmF2aWdhdGlvblxuICBpbml0UmVzcG9uc2l2ZU5hdmlnYXRpb24oKTtcblxuICAvLyBQYXJzZSBib2R5XG4gIHBhcnNlRG9jdW1lbnQoJCgnYm9keScpKTtcblxuICAvLyBDaGVjayByZXNwb25zaXZlIG5hdmlnYXRpb25cbiAgY2hlY2tOYXZpZ2F0aW9uKHRydWUpO1xuXG4gIC8vIEV2ZW50c1xuICBzdHlsZUNvbmZpZy5fbG9hZGVkID0gdHJ1ZTtcbiAgc3R5bGVDb25maWcuX3Jlc2l6ZVRocm90dGxlZCA9IGZhbHNlO1xuICBzdHlsZUNvbmZpZy5fcmVzaXplUXVldWVkID0gZmFsc2U7XG5cbiAgJCh3aW5kb3cpLmxvYWQoZnVuY3Rpb24gKCkge1xuICAgIGNoZWNrTmF2aWdhdGlvbih0cnVlKTtcbiAgICBpZiAoc3R5bGVDb25maWcuZXh0ZW5kUG9zdGVyUHJvZmlsZSkge1xuICAgICAgJCgnLnBvc3Rwcm9maWxlICsgLnBvc3Rib2R5ID4gZGl2Om9ubHktY2hpbGQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYWRqdXN0UG9zdGVyUHJvZmlsZSgkKHRoaXMpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFzdHlsZUNvbmZpZy5fcmVzaXplVGhyb3R0bGVkKSB7XG4gICAgICBwcm9jZXNzUmVzaXplRXZlbnQoKTtcbiAgICAgIHN0eWxlQ29uZmlnLl9yZXNpemVUaHJvdHRsZWQgPSB0cnVlO1xuICAgICAgc3R5bGVDb25maWcuX3Jlc2l6ZVF1ZXVlZCA9IGZhbHNlO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN0eWxlQ29uZmlnLl9yZXNpemVUaHJvdHRsZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHN0eWxlQ29uZmlnLl9yZXNpemVRdWV1ZWQpIHtcbiAgICAgICAgICBwcm9jZXNzUmVzaXplRXZlbnQoKTtcbiAgICAgICAgfVxuICAgICAgfSwgNTAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGVDb25maWcuX3Jlc2l6ZVF1ZXVlZCA9IHRydWU7XG4gICAgfVxuICB9KTtcbn0pO1xuIl19
